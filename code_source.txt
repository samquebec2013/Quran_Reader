Fichier: app/src/main\AndroidManifest.xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">


    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/icon"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/icon"
        android:supportsRtl="true"
        android:theme="@style/Theme.DarkNonTransparent"
        tools:targetApi="31">
        <activity android:name=".HomeActivity" android:exported="true"/>
        <activity android:name=".WebViewActivity" />
        <activity android:name=".AboutActivity" />
        <activity
            android:name=".MainActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>


    </application>

</manifest>

Fichier: app/src/main\assets\books\Douaa\chapters.json
{
  "categories": [
    {
      "title": "📖 أدعية وأذكار",
      "subcategories": [
        {"name": "دعاء ختم القرآن", "page": "1"},
        {"name": "أذكار التحصين", "page": "4"},
        {"name": "أذكار الصباح والمساء", "page": "6"},
        {"name": "أذكار النوم والإستيقاظ", "page": "8"},
        {"name": "أذكار الورد اليومي", "page": "9"}
           ]
    }

  ]
}

Fichier: app/src/main\assets\books\Douaa\config.json
{
  "title": "أدعية وأذكار",
  "totalPages": 10,
  "assetsPath": "books/Douaa/pages/",
  "chaptersFile": "books/Douaa/chapters.json",
  "titlesFile": "books/Douaa/title.json"
}

Fichier: app/src/main\assets\books\Douaa\title.json
{ "1": "دعاء ختم القرآن ",
  "2": "دعاء ختم القرآن",
  "3": "دعاء ختم القرآن",
  "4": "أذكار التحصين",
  "5": "أذكار التحصين",
  "6": "أذكار الصباح والمساء",
  "7": "أذكار الصباح والمساء",
  "8": "أذكار النوم والإستيقاظ",
  "9": "أذكار الورد اليومي",
  "10": "أذكار الورد اليومي"
  }

Fichier: app/src/main\assets\books\quran\chapters.json
{
  "categories": [
    {
      "title": "📖 السور",
      "subcategories": [
        {"name": "الفاتحة", "page": "2"},
        {"name": "البقرة", "page": "3"},
        {"name": "آل عمران", "page": "42"},
        {"name": "النساء", "page": "63"},
        {"name": "المائدة", "page": "87"},
        {"name": "الأنعام", "page": "105"},
        {"name": "الأعراف", "page": "123"},
        {"name": "الأنفال", "page": "143"},
        {"name": "التوبة", "page": "151"},
        {"name": "يونس", "page": "168"},
        {"name": "هود", "page": "179"},
        {"name": "يوسف", "page": "191"},
        {"name": "الرعد", "page": "201"},
        {"name": "إبراهيم", "page": "207"},
        {"name": "الحجر", "page": "212"},
        {"name": "النحل", "page": "216"},
        {"name": "الإسراء", "page": "228"},
        {"name": "الكهف", "page": "237"},
        {"name": "مريم", "page": "246"},
        {"name": "طه", "page": "252"},
        {"name": "الأنبياء", "page": "260"},
        {"name": "الحج", "page": "268"},
        {"name": "المؤمنون", "page": "276"},
        {"name": "النور", "page": "282"},
        {"name": "الفرقان", "page": "290"},
        {"name": "الشعراء", "page": "296"},
        {"name": "النمل", "page": "303"},
        {"name": "القصص", "page": "311"},
        {"name": "العنكبوت", "page": "319"},
        {"name": "الروم", "page": "325"},
        {"name": "لقمان", "page": "330"},
        {"name": "السجدة", "page": "333"},
        {"name": "الأحزاب", "page": "336"},
        {"name": "سبأ", "page": "345"},
        {"name": "فاطر", "page": "350"},
        {"name": "يس", "page": "354"},
        {"name": "الصافات", "page": "359"},
        {"name": "ص", "page": "365"},
        {"name": "الزمر", "page": "369"},
        {"name": "غافر", "page": "376"},
        {"name": "فصلت", "page": "383"},
        {"name": "الشورى", "page": "388"},
        {"name": "الزخرف", "page": "394"},
        {"name": "الدخان", "page": "399"},
        {"name": "الجاثية", "page": "401"},
        {"name": "الأحقاف", "page": "404"},
        {"name": "محمد", "page": "407"},
        {"name": "الفتح", "page": "410"},
        {"name": "الحجرات", "page": "414"},
        {"name": "ق", "page": "416"},
        {"name": "الذاريات", "page": "419"},
        {"name": "الطور", "page": "421"},
        {"name": "النجم", "page": "423"},
        {"name": "القمر", "page": "425"},
        {"name": "الرحمن", "page": "428"},
        {"name": "الواقعة", "page": "430"},
        {"name": "الحديد", "page": "432"},
        {"name": "المجادلة", "page": "436"},
        {"name": "الحشر", "page": "438"},
        {"name": "الممتحنة", "page": "441"},
        {"name": "الصف", "page": "443"},
        {"name": "الجمعة", "page": "444"},
        {"name": "المنافقون", "page": "445"},
        {"name": "التغابن", "page": "446"},
        {"name": "الطلاق", "page": "448"},
        {"name": "التحريم", "page": "450"},
        {"name": "الملك", "page": "452"},
        {"name": "القلم", "page": "453"},
        {"name": "الحاقة", "page": "455"},
        {"name": "المعارج", "page": "457"},
        {"name": "نوح", "page": "458"},
        {"name": "الجن", "page": "460"},
        {"name": "المزمل", "page": "461"},
        {"name": "المدثر", "page": "462"},
        {"name": "القيامة", "page": "464"},
        {"name": "الإنسان", "page": "465"},
        {"name": "المرسلات", "page": "466"},
        {"name": "النبأ", "page": "468"},
        {"name": "النازعات", "page": "469"},
        {"name": "عبس", "page": "470"},
        {"name": "التكوير", "page": "471"},
        {"name": "الإنفطار", "page": "472"},
        {"name": "المطففين", "page": "472"},
        {"name": "الإنشقاق", "page": "473"},
        {"name": "البروج", "page": "474"},
        {"name": "الطارق", "page": "475"},
        {"name": "الأعلى", "page": "476"},
        {"name": "الغاشية", "page": "476"},
        {"name": "الفجر", "page": "477"},
        {"name": "البلد", "page": "478"},
        {"name": "الشمس", "page": "478"},
        {"name": "الليل", "page": "479"},
        {"name": "الضحى", "page": "479"},
        {"name": "الشرح", "page": "480"},
        {"name": "التين", "page": "480"},
        {"name": "العلق", "page": "480"},
        {"name": "القدر", "page": "481"},
        {"name": "البينة", "page": "481"},
        {"name": "الزلزلة", "page": "482"},
        {"name": "العاديات", "page": "482"},
        {"name": "القارعة", "page": "483"},
        {"name": "التكاثر", "page": "483"},
        {"name": "العصر", "page": "483"},
        {"name": "الهمزة", "page": "484"},
        {"name": "الفيل", "page": "484"},
        {"name": "قريش", "page": "484"},
        {"name": "الماعون", "page": "485"},
        {"name": "الكوثر", "page": "485"},
        {"name": "الكافرون", "page": "485"},
        {"name": "النصر", "page": "485"},
        {"name": "المسد", "page": "486"},
        {"name": "الإخلاص", "page": "486"},
        {"name": "الفلق", "page": "486"},
        {"name": "الناس", "page": "486"}
      ]
    },

    {
      "title": "📚 الأحزاب",
      "subcategories": [
        {"name": "حزب 1", "page": "3"},
        {"name": "حزب 2", "page": "11"},
        {"name": "حزب 3", "page": "19"},
        {"name": "حزب 4", "page": "27"},
        {"name": "حزب 5", "page": "35"},
        {"name": "حزب 6", "page": "43"},
        {"name": "حزب 7", "page": "51"},
        {"name": "حزب 8", "page": "59"},
        {"name": "حزب 9", "page": "67"},
        {"name": "حزب 10", "page": "75"},
        {"name": "حزب 11", "page": "83"},
        {"name": "حزب 12", "page": "91"},
        {"name": "حزب 13", "page": "99"},
        {"name": "حزب 14", "page": "107"},
        {"name": "حزب 15", "page": "115"},
        {"name": "حزب 16", "page": "123"},
        {"name": "حزب 17", "page": "131"},
        {"name": "حزب 18", "page": "139"},
        {"name": "حزب 19", "page": "147"},
        {"name": "حزب 20", "page": "155"},
        {"name": "حزب 21", "page": "163"},
        {"name": "حزب 22", "page": "171"},
        {"name": "حزب 23", "page": "179"},
        {"name": "حزب 24", "page": "187"},
        {"name": "حزب 25", "page": "195"},
        {"name": "حزب 26", "page": "203"},
        {"name": "حزب 27", "page": "211"},
        {"name": "حزب 28", "page": "219"},
        {"name": "حزب 29", "page": "227"},
        {"name": "حزب 30", "page": "235"},
        {"name": "حزب 31", "page": "243"},
        {"name": "حزب 32", "page": "251"},
        {"name": "حزب 33", "page": "259"},
        {"name": "حزب 34", "page": "267"},
        {"name": "حزب 35", "page": "275"},
        {"name": "حزب 36", "page": "283"},
        {"name": "حزب 37", "page": "291"},
        {"name": "حزب 38", "page": "299"},
        {"name": "حزب 39", "page": "307"},
        {"name": "حزب 40", "page": "315"},
        {"name": "حزب 41", "page": "323"},
        {"name": "حزب 42", "page": "331"},
        {"name": "حزب 43", "page": "339"},
        {"name": "حزب 44", "page": "347"},
        {"name": "حزب 45", "page": "355"},
        {"name": "حزب 46", "page": "363"},
        {"name": "حزب 47", "page": "371"},
        {"name": "حزب 48", "page": "379"},
        {"name": "حزب 49", "page": "387"},
        {"name": "حزب 50", "page": "395"},
        {"name": "حزب 51", "page": "403"},
        {"name": "حزب 52", "page": "411"},
        {"name": "حزب 53", "page": "419"},
        {"name": "حزب 54", "page": "427"},
        {"name": "حزب 55", "page": "435"},
        {"name": "حزب 56", "page": "443"},
        {"name": "حزب 57", "page": "451"},
        {"name": "حزب 58", "page": "459"},
        {"name": "حزب 59", "page": "467"},
        {"name": "حزب 60", "page": "475"}
      ]
    },
    {
      "title": "📜 الأجزاء",
      "subcategories": [
        {"name": "جزء 1", "page": "3"},
        {"name": "جزء 2", "page": "19"},
        {"name": "جزء 3", "page": "35"},
        {"name": "جزء 4", "page": "51"},
        {"name": "جزء 5", "page": "67"},
        {"name": "جزء 6", "page": "83"},
        {"name": "جزء 7", "page": "99"},
        {"name": "جزء 8", "page": "115"},
        {"name": "جزء 9", "page": "131"},
        {"name": "جزء 10", "page": "147"},
        {"name": "جزء 11", "page": "163"},
        {"name": "جزء 12", "page": "179"},
        {"name": "جزء 13", "page": "195"},
        {"name": "جزء 14", "page": "211"},
        {"name": "جزء 15", "page": "227"},
        {"name": "جزء 16", "page": "243"},
        {"name": "جزء 17", "page": "259"},
        {"name": "جزء 18", "page": "275"},
        {"name": "جزء 19", "page": "291"},
        {"name": "جزء 20", "page": "307"},
        {"name": "جزء 21", "page": "323"},
        {"name": "جزء 22", "page": "339"},
        {"name": "جزء 23", "page": "355"},
        {"name": "جزء 24", "page": "371"},
        {"name": "جزء 25", "page": "387"},
        {"name": "جزء 26", "page": "403"},
        {"name": "جزء 27", "page": "419"},
        {"name": "جزء 28", "page": "435"},
        {"name": "جزء 29", "page": "451"},
        {"name": "جزء 30", "page": "467"}
      ]
    }

  ]
}

Fichier: app/src/main\assets\books\quran\config.json
{
  "title": "مصحف برواية ورش أثمان تجويد",
  "totalPages": 486,
  "assetsPath": "books/quran/pages/",
  "chaptersFile": "books/quran/chapters.json",
  "titlesFile": "books/quran/title.json"
}

Fichier: app/src/main\assets\books\quran\title.json
{ "1": "مصحف برواية ورش أثمان تجويد ",
  "2": "الفاتحة - حزب 1 - ثمن",
  "3": "البقرة - حزب 1 - ثمن",
  "4": "البقرة - حزب 1 - ثمن",
  "5": "البقرة - حزب 1 - ربع",
  "6": "البقرة - حزب 1 - 3/8",
  "7": "البقرة - حزب 1 - نصف",
  "8": "البقرة - حزب 1 - 5/8",
  "9": "البقرة - حزب 1 - 3/4",
  "10": "البقرة - حزب 1 - 7/8",
  "11": "البقرة - حزب 1 -   ",
  "12": "البقرة - حزب 2 - ثمن",
  "13": "البقرة - حزب 2 - ربع",
  "14": "البقرة - حزب 2 - 3/8",
  "15": "البقرة - حزب 2 - نصف",
  "16": "البقرة - حزب 2 - 5/8",
  "17": "البقرة - حزب 2 - 3/4",
  "18": "البقرة - حزب 2 - 7/8",
  "19": "البقرة - حزب 2 -   ",
  "20": "البقرة - حزب 3 - ثمن",
  "21": "البقرة - حزب 3 - ربع",
  "22": "البقرة - حزب 3 - 3/8",
  "23": "البقرة - حزب 3 - نصف",
  "24": "البقرة - حزب 3 - 5/8",
  "25": "البقرة - حزب 3 - 3/4",
  "26": "البقرة - حزب 3 - 7/8",
  "27": "البقرة - حزب 3 -   ",
  "28": "البقرة - حزب 4 - ثمن",
  "29": "البقرة - حزب 4 - ربع",
  "30": "البقرة - حزب 4 - 3/8",
  "31": "البقرة - حزب 4 - نصف",
  "32": "البقرة - حزب 4 - 5/8",
  "33": "البقرة - حزب 4 - 3/4",
  "34": "البقرة - حزب 4 - 7/8",
  "35": "البقرة - حزب 4 -   ",
  "36": "البقرة - حزب 5 - ثمن",
  "37": "البقرة - حزب 5 - ربع",
  "38": "البقرة - حزب 5 - 3/8",
  "39": "البقرة - حزب 5 - نصف",
  "40": "البقرة - حزب 5 - 5/8",
  "41": "البقرة - حزب 5 - 3/4",
  "42": "آل عمران - حزب 5 - 7/8",
  "43": "آل عمران - حزب 5 -   ",
  "44": "آل عمران - حزب 6 - ثمن",
  "45": "آل عمران - حزب 6 - ربع",
  "46": "آل عمران - حزب 6 - 3/8",
  "47": "آل عمران - حزب 6 - نصف",
  "48": "آل عمران - حزب 6 - 5/8",
  "49": "آل عمران - حزب 6 - 3/4",
  "50": "آل عمران - حزب 6 - 7/8",
  "51": "آل عمران - حزب 6 -   ",
  "52": "آل عمران - حزب 7 - ثمن",
  "53": "آل عمران - حزب 7 - ربع",
  "54": "آل عمران - حزب 7 - 3/8",
  "55": "آل عمران - حزب 7 - نصف",
  "56": "آل عمران - حزب 7 - 5/8",
  "57": "آل عمران - حزب 7 - 3/4",
  "58": "آل عمران - حزب 7 - 7/8",
  "59": "آل عمران - حزب 7 -   ",
  "60": "آل عمران - حزب 8 - ثمن",
  "61": "آل عمران - حزب 8 - ربع",
  "62": "آل عمران - حزب 8 - 3/8",
  "63": "النساء - حزب 8 - نصف",
  "64": "النساء - حزب 8 - 5/8",
  "65": "النساء - حزب 8 - 3/4",
  "66": "النساء - حزب 8 - 7/8",
  "67": "النساء - حزب 8 -   ",
  "68": "النساء - حزب 9 - ثمن",
  "69": "النساء - حزب 9 - ربع",
  "70": "النساء - حزب 9 - 3/8",
  "71": "النساء - حزب 9 - نصف",
  "72": "النساء - حزب 9 - 5/8",
  "73": "النساء - حزب 9 - 3/4",
  "74": "النساء - حزب 9 - 7/8",
  "75": "النساء - حزب 9 -   ",
  "76": "النساء - حزب 10 - ثمن",
  "77": "النساء - حزب 10 - ربع",
  "78": "النساء - حزب 10 - 3/8",
  "79": "النساء - حزب 10 - نصف",
  "80": "النساء - حزب 10 - 5/8",
  "81": "النساء - حزب 10 - 3/4",
  "82": "النساء - حزب 10 - 7/8",
  "83": "النساء - حزب 10 -   ",
  "84": "النساء - حزب 11 - ثمن",
  "85": "النساء - حزب 11 - ربع",
  "86": "النساء - حزب 11 - 3/8",
  "87": "المائدة - حزب 11 - نصف",
  "88": "المائدة - حزب 11 - 5/8",
  "89": "المائدة - حزب 11 - 3/4",
  "90": "المائدة - حزب 11 - 7/8",
  "91": "المائدة - حزب 11 -   ",
  "92": "المائدة - حزب 12 - ثمن",
  "93": "المائدة - حزب 12 - ربع",
  "94": "المائدة - حزب 12 - 3/8",
  "95": "المائدة - حزب 12 - نصف",
  "96": "المائدة - حزب 12 - 5/8",
  "97": "المائدة - حزب 12 - 3/4",
  "98": "المائدة - حزب 12 - 7/8",
  "99": "المائدة - حزب 12 -   ",
  "100": "المائدة - حزب 13 - ثمن",
  "101": "المائدة - حزب 13 - ربع",
  "102": "المائدة - حزب 13 - 3/8",
  "103": "المائدة - حزب 13 - نصف",
  "104": "المائدة - حزب 13 - 5/8",
  "105": "الأنعام - حزب 13 - 3/4",
  "106": "الأنعام - حزب 13 - 7/8",
  "107": "الأنعام - حزب 13 -   ",
  "108": "الأنعام - حزب 14 - ثمن",
  "109": "الأنعام - حزب 14 - ربع",
  "110": "الأنعام - حزب 14 - 3/8",
  "111": "الأنعام - حزب 14 - نصف",
  "112": "الأنعام - حزب 14 - 5/8",
  "113": "الأنعام - حزب 14 - 3/4",
  "114": "الأنعام - حزب 14 - 7/8",
  "115": "الأنعام - حزب 14 -   ",
  "116": "الأنعام - حزب 15 - ثمن",
  "117": "الأنعام - حزب 15 - ربع",
  "118": "الأنعام - حزب 15 - 3/8",
  "119": "الأنعام - حزب 15 - نصف",
  "120": "الأنعام - حزب 15 - 5/8",
  "121": "الأنعام - حزب 15 - 3/4",
  "122": "الأنعام - حزب 15 - 7/8",
  "123": "الأعراف - حزب 15 -   ",
  "124": "الأعراف - حزب 16 - ثمن",
  "125": "الأعراف - حزب 16 - ربع",
  "126": "الأعراف - حزب 16 - 3/8",
  "127": "الأعراف - حزب 16 - نصف",
  "128": "الأعراف - حزب 16 - 5/8",
  "129": "الأعراف - حزب 16 - 3/4",
  "130": "الأعراف - حزب 16 - 7/8",
  "131": "الأعراف - حزب 16 -   ",
  "132": "الأعراف - حزب 17 - ثمن",
  "133": "الأعراف - حزب 17 - ربع",
  "134": "الأعراف - حزب 17 - 3/8",
  "135": "الأعراف - حزب 17 - نصف",
  "136": "الأعراف - حزب 17 - 5/8",
  "137": "الأعراف - حزب 17 - 3/4",
  "138": "الأعراف - حزب 17 - 7/8",
  "139": "الأعراف - حزب 17 -   ",
  "140": "الأعراف - حزب 18 - ثمن",
  "141": "الأعراف - حزب 18 - ربع",
  "142": "الأعراف - حزب 18 - 3/8",
  "143": "الأنفال - حزب 18 - نصف",
  "144": "الأنفال - حزب 18 - 5/8",
  "145": "الأنفال - حزب 18 - 3/4",
  "146": "الأنفال - حزب 18 - 7/8",
  "147": "الأنفال - حزب 18 -   ",
  "148": "الأنفال - حزب 19 - ثمن",
  "149": "الأنفال - حزب 19 - ربع",
  "150": "الأنفال - حزب 19 - 3/8",
  "151": "التوبة - حزب 19 - نصف",
  "152": "التوبة - حزب 19 - 5/8",
  "153": "التوبة - حزب 19 - 3/4",
  "154": "التوبة - حزب 19 - 7/8",
  "155": "التوبة - حزب 19 -   ",
  "156": "التوبة - حزب 20 - ثمن",
  "157": "التوبة - حزب 20 - ربع",
  "158": "التوبة - حزب 20 - 3/8",
  "159": "التوبة - حزب 20 - نصف",
  "160": "التوبة - حزب 20 - 5/8",
  "161": "التوبة - حزب 20 - 3/4",
  "162": "التوبة - حزب 20 - 7/8",
  "163": "التوبة - حزب 20 -   ",
  "164": "التوبة - حزب 21 - ثمن",
  "165": "التوبة - حزب 21 - ربع",
  "166": "التوبة - حزب 21 - 3/8",
  "167": "التوبة - حزب 21 - نصف",
  "168": "يونس - حزب 21 - 5/8",
  "169": "يونس - حزب 21 - 3/4",
  "170": "يونس - حزب 21 - 7/8",
  "171": "يونس - حزب 21 -   ",
  "172": "يونس - حزب 22 - ثمن",
  "173": "يونس - حزب 22 - ربع",
  "174": "يونس - حزب 22 - 3/8",
  "175": "يونس - حزب 22 - نصف",
  "176": "يونس - حزب 22 - 5/8",
  "177": "يونس - حزب 22 - 3/4",
  "178": "يونس - حزب 22 - 7/8",
  "179": "هود - حزب 22 -   ",
  "180": "هود - حزب 23 - ثمن",
  "181": "هود - حزب 23 - ربع",
  "182": "هود - حزب 23 - 3/8",
  "183": "هود - حزب 23 - نصف",
  "184": "هود - حزب 23 - 5/8",
  "185": "هود - حزب 23 - 3/4",
  "186": "هود - حزب 23 - 7/8",
  "187": "هود - حزب 23 -   ",
  "188": "هود - حزب 24 - ثمن",
  "189": "هود - حزب 24 - ربع",
  "190": "هود - حزب 24 - 3/8",
  "191": "يوسف - حزب 24 - نصف",
  "192": "يوسف - حزب 24 - 5/8",
  "193": "يوسف - حزب 24 - 3/4",
  "194": "يوسف - حزب 24 - 7/8",
  "195": "يوسف - حزب 24 -   ",
  "196": "يوسف - حزب 25 - ثمن",
  "197": "يوسف - حزب 25 - ربع",
  "198": "يوسف - حزب 25 - 3/8",
  "199": "يوسف - حزب 25 - نصف",
  "200": "يوسف - حزب 25 - 5/8",
  "201": "الرعد - حزب 25 - 3/4",
  "202": "الرعد - حزب 25 - 7/8",
  "203": "الرعد - حزب 25 -   ",
  "204": "الرعد - حزب 26 - ثمن",
  "205": "الرعد - حزب 26 - ربع",
  "206": "الرعد - حزب 26 - 3/8",
  "207": "إبراهيم - حزب 26 - نصف",
  "208": "إبراهيم - حزب 26 - 5/8",
  "209": "إبراهيم - حزب 26 - 3/4",
  "210": "إبراهيم - حزب 26 - 7/8",
  "211": "إبراهيم - حزب 26 -   ",
  "212": "الحجر - حزب 27 - ثمن",
  "213": "الحجر - حزب 27 - ربع",
  "214": "الحجر - حزب 27 - 3/8",
  "215": "الحجر - حزب 27 - نصف",
  "216": "النحل - حزب 27 - 5/8",
  "217": "النحل - حزب 27 - 3/4",
  "218": "النحل - حزب 27 - 7/8",
  "219": "النحل - حزب 27 -   ",
  "220": "النحل - حزب 28 - ثمن",
  "221": "النحل - حزب 28 - ربع",
  "222": "النحل - حزب 28 - 3/8",
  "223": "النحل - حزب 28 - نصف",
  "224": "النحل - حزب 28 - 5/8",
  "225": "النحل - حزب 28 - 3/4",
  "226": "النحل - حزب 28 - 7/8",
  "227": "النحل - حزب 28 -   ",
  "228": "الإسراء - حزب 29 - ثمن",
  "229": "الإسراء - حزب 29 - ربع",
  "230": "الإسراء - حزب 29 - 3/8",
  "231": "الإسراء - حزب 29 - نصف",
  "232": "الإسراء - حزب 29 - 5/8",
  "233": "الإسراء - حزب 29 - 3/4",
  "234": "الإسراء - حزب 29 - 7/8",
  "235": "الإسراء - حزب 29 -   ",
  "236": "الإسراء - حزب 30 - ثمن",
  "237": "الكهف - حزب 30 - ربع",
  "238": "الكهف - حزب 30 - 3/8",
  "239": "الكهف - حزب 30 - نصف",
  "240": "الكهف - حزب 30 - 5/8",
  "241": "الكهف - حزب 30 - 3/4",
  "242": "الكهف - حزب 30 - 7/8",
  "243": "الكهف - حزب 30 -   ",
  "244": "الكهف - حزب 31 - ثمن",
  "245": "الكهف - حزب 31 - ربع",
  "246": "مريم - حزب 31 - 3/8",
  "247": "مريم - حزب 31 - نصف",
  "248": "مريم - حزب 31 - 5/8",
  "249": "مريم - حزب 31 - 3/4",
  "250": "مريم - حزب 31 - 7/8",
  "251": "مريم - حزب 31 -   ",
  "252": "طه - حزب 32 - ثمن",
  "253": "طه - حزب 32 - ربع",
  "254": "طه - حزب 32 - 3/8",
  "255": "طه - حزب 32 - نصف",
  "256": "طه - حزب 32 - 5/8",
  "257": "طه - حزب 32 - 3/4",
  "258": "طه - حزب 32 - 7/8",
  "259": "طه - حزب 32 -   ",
  "260": "الأنبياء - حزب 33 - ثمن",
  "261": "الأنبياء - حزب 33 - ربع",
  "262": "الأنبياء - حزب 33 - 3/8",
  "263": "الأنبياء - حزب 33 - نصف",
  "264": "الأنبياء - حزب 33 - 5/8",
  "265": "الأنبياء - حزب 33 - 3/4",
  "266": "الأنبياء - حزب 33 - 7/8",
  "267": "الأنبياء - حزب 33 -   ",
  "268": "الحج - حزب 34 - ثمن",
  "269": "الحج - حزب 34 - ربع",
  "270": "الحج - حزب 34 - 3/8",
  "271": "الحج - حزب 34 - نصف",
  "272": "الحج - حزب 34 - 5/8",
  "273": "الحج - حزب 34 - 3/4",
  "274": "الحج - حزب 34 - 7/8",
  "275": "الحج - حزب 34 -   ",
  "276": "المؤمنون - حزب 35 - ثمن",
  "277": "المؤمنون - حزب 35 - ربع",
  "278": "المؤمنون - حزب 35 - 3/8",
  "279": "المؤمنون - حزب 35 - نصف",
  "280": "المؤمنون - حزب 35 - 5/8",
  "281": "المؤمنون - حزب 35 - 3/4",
  "282": "النور - حزب 35 - 7/8",
  "283": "النور - حزب 35 -   ",
  "284": "النور - حزب 36 - ثمن",
  "285": "النور - حزب 36 - ربع",
  "286": "النور - حزب 36 - 3/8",
  "287": "النور - حزب 36 - نصف",
  "288": "النور - حزب 36 - 5/8",
  "289": "النور - حزب 36 - 3/4",
  "290": "الفرقان - حزب 36 - 7/8",
  "291": "الفرقان - حزب 36 -   ",
  "292": "الفرقان - حزب 37 - ثمن",
  "293": "الفرقان - حزب 37 - ربع",
  "294": "الفرقان - حزب 37 - 3/8",
  "295": "الفرقان - حزب 37 - نصف",
  "296": "الشعراء - حزب 37 - 5/8",
  "297": "الشعراء - حزب 37 - 3/4",
  "298": "الشعراء - حزب 37 - 7/8",
  "299": "الشعراء - حزب 37 -   ",
  "300": "الشعراء - حزب 38 - ثمن",
  "301": "الشعراء - حزب 38 - ربع",
  "302": "الشعراء - حزب 38 - 3/8",
  "303": "النمل - حزب 38 - نصف",
  "304": "النمل - حزب 38 - 5/8",
  "305": "النمل - حزب 38 - 3/4",
  "306": "النمل - حزب 38 - 7/8",
  "307": "النمل - حزب 38 -   ",
  "308": "النمل - حزب 39 - ثمن",
  "309": "النمل - حزب 39 - ربع",
  "310": "النمل - حزب 39 - 3/8",
  "311": "القصص - حزب 39 - نصف",
  "312": "القصص - حزب 39 - 5/8",
  "313": "القصص - حزب 39 - 3/4",
  "314": "القصص - حزب 39 - 7/8",
  "315": "القصص - حزب 39 -   ",
  "316": "القصص - حزب 40 - ثمن",
  "317": "القصص - حزب 40 - ربع",
  "318": "القصص - حزب 40 - 3/8",
  "319": "العنكبوت - حزب 40 - نصف",
  "320": "العنكبوت - حزب 40 - 5/8",
  "321": "العنكبوت - حزب 40 - 3/4",
  "322": "العنكبوت - حزب 40 - 7/8",
  "323": "العنكبوت - حزب 40 -   ",
  "324": "العنكبوت - حزب 41 - ثمن",
  "325": "الروم - حزب 41 - ربع",
  "326": "الروم - حزب 41 - 3/8",
  "327": "الروم - حزب 41 - نصف",
  "328": "الروم - حزب 41 - 5/8",
  "329": "الروم - حزب 41 - 3/4",
  "330": "لقمان - حزب 41 - 7/8",
  "331": "لقمان - حزب 41 -   ",
  "332": "لقمان - حزب 42 - ثمن",
  "333": "السجدة - حزب 42 - ربع",
  "334": "السجدة - حزب 42 - 3/8",
  "335": "السجدة - حزب 42 - نصف",
  "336": "الأحزاب - حزب 42 - 5/8",
  "337": "الأحزاب - حزب 42 - 3/4",
  "338": "الأحزاب - حزب 42 - 7/8",
  "339": "الأحزاب - حزب 42 -   ",
  "340": "الأحزاب - حزب 43 - ثمن",
  "341": "الأحزاب - حزب 43 - ربع",
  "342": "الأحزاب - حزب 43 - 3/8",
  "343": "الأحزاب - حزب 43 - نصف",
  "344": "الأحزاب - حزب 43 - 5/8",
  "345": "سبأ - حزب 43 - 3/4",
  "346": "سبأ - حزب 43 - 7/8",
  "347": "سبأ - حزب 43 -   ",
  "348": "سبأ - حزب 44 - ثمن",
  "349": "سبأ - حزب 44 - ربع",
  "350": "فاطر - حزب 44 - 3/8",
  "351": "فاطر - حزب 44 - نصف",
  "352": "فاطر - حزب 44 - 5/8",
  "353": "فاطر - حزب 44 - 3/4",
  "354": "يس - حزب 44 - 7/8",
  "355": "يس - حزب 44 -   ",
  "356": "يس - حزب 45 - ثمن",
  "357": "يس - حزب 45 - ربع",
  "358": "يس - حزب 45 - 3/8",
  "359": "الصافات - حزب 45 - نصف",
  "360": "الصافات - حزب 45 - 5/8",
  "361": "الصافات - حزب 45 - 3/4",
  "362": "الصافات - حزب 45 - 7/8",
  "363": "الصافات - حزب 45 -   ",
  "364": "الصافات - حزب 46 - ثمن",
  "365": "ص - حزب 46 - ربع",
  "366": "ص - حزب 46 - 3/8",
  "367": "ص - حزب 46 - نصف",
  "368": "ص - حزب 46 - 5/8",
  "369": "الزمر - حزب 46 - 3/4",
  "370": "الزمر - حزب 46 - 7/8",
  "371": "الزمر - حزب 46 -   ",
  "372": "الزمر - حزب 47 - ثمن",
  "373": "الزمر - حزب 47 - ربع",
  "374": "الزمر - حزب 47 - 3/8",
  "375": "الزمر - حزب 47 - نصف",
  "376": "غافر - حزب 47 - 5/8",
  "377": "غافر - حزب 47 - 3/4",
  "378": "غافر - حزب 47 - 7/8",
  "379": "غافر - حزب 47 -   ",
  "380": "غافر - حزب 48 - ثمن",
  "381": "غافر - حزب 48 - ربع",
  "382": "غافر - حزب 48 - 3/8",
  "383": "فصلت - حزب 48 - نصف",
  "384": "فصلت - حزب 48 - 5/8",
  "385": "فصلت - حزب 48 - 3/4",
  "386": "فصلت - حزب 48 - 7/8",
  "387": "فصلت - حزب 48 -   ",
  "388": "الشورى - حزب 49 - ثمن",
  "389": "الشورى - حزب 49 - ربع",
  "390": "الشورى - حزب 49 - 3/8",
  "391": "الشورى - حزب 49 - نصف",
  "392": "الشورى - حزب 49 - 5/8",
  "393": "الشورى - حزب 49 - 3/4",
  "394": "الزخرف - حزب 49 - 7/8",
  "395": "الزخرف - حزب 49 -   ",
  "396": "الزخرف - حزب 50 - ثمن",
  "397": "الزخرف - حزب 50 - ربع",
  "398": "الزخرف - حزب 50 - 3/8",
  "399": "الدخان - حزب 50 - نصف",
  "400": "الدخان - حزب 50 - 5/8",
  "401": "الجاثية - حزب 50 - 3/4",
  "402": "الجاثية - حزب 50 - 7/8",
  "403": "الجاثية - حزب 50 -   ",
  "404": "الأحقاف - حزب 51 - ثمن",
  "405": "الأحقاف - حزب 51 - ربع",
  "406": "الأحقاف - حزب 51 - 3/8",
  "407": "محمد - حزب 51 - نصف",
  "408": "محمد - حزب 51 - 5/8",
  "409": "محمد - حزب 51 - 3/4",
  "410": "الفتح - حزب 51 - 7/8",
  "411": "الفتح - حزب 51 -   ",
  "412": "الفتح - حزب 52 - ثمن",
  "413": "الفتح - حزب 52 - ربع",
  "414": "الحجرات - حزب 52 - 3/8",
  "415": "الحجرات - حزب 52 - نصف",
  "416": "ق - حزب 52 - 5/8",
  "417": "ق - حزب 52 - 3/4",
  "418": "ق - حزب 52 - 7/8",
  "419": "الذاريات - حزب 52 -   ",
  "420": "الذاريات - حزب 53 - ثمن",
  "421": "الطور - حزب 53 - ربع",
  "422": "الطور - حزب 53 - 3/8",
  "423": "النجم - حزب 53 - نصف",
  "424": "النجم - حزب 53 - 5/8",
  "425": "القمر - حزب 53 - 3/4",
  "426": "القمر - حزب 53 - 7/8",
  "427": "القمر - حزب 53 -   ",
  "428": "الرحمن - حزب 54 - ثمن",
  "429": "الرحمن - حزب 54 - ربع",
  "430": "الواقعة - حزب 54 - 3/8",
  "431": "الواقعة - حزب 54 - نصف",
  "432": "الحديد - حزب 54 - 5/8",
  "433": "الحديد - حزب 54 - 3/4",
  "434": "الحديد - حزب 54 - 7/8",
  "435": "الحديد - حزب 54 -   ",
  "436": "المجادلة - حزب 55 - ثمن",
  "437": "المجادلة - حزب 55 - ربع",
  "438": "الحشر - حزب 55 - 3/8",
  "439": "الحشر - حزب 55 - نصف",
  "440": "الحشر - حزب 55 - 5/8",
  "441": "الممتحنة - حزب 55 - 3/4",
  "442": "الممتحنة - حزب 55 - 7/8",
  "443": "الصف - حزب 55 -   ",
  "444": "الجمعة - حزب 56 - ثمن",
  "445": "المنافقون - حزب 56 - ربع",
  "446": "التغابن - حزب 56 - 3/8",
  "447": "التغابن - حزب 56 - نصف",
  "448": "الطلاق - حزب 56 - 5/8",
  "449": "الطلاق - حزب 56 - 3/4",
  "450": "التحريم - حزب 56 - 7/8",
  "451": "التحريم - حزب 56 -   ",
  "452": "الملك - حزب 57 - ثمن",
  "453": "القلم - حزب 57 - ربع",
  "454": "القلم - حزب 57 - 3/8",
  "455": "الحاقة - حزب 57 - نصف",
  "456": "الحاقة - حزب 57 - 5/8",
  "457": "المعارج - حزب 57 - 3/4",
  "458": "نوح - حزب 57 - 7/8",
  "459": "نوح - حزب 57 -   ",
  "460": "الجن - حزب 58 - ثمن",
  "461": "المزمل - حزب 58 - ربع",
  "462": "المدثر - حزب 58 - 3/8",
  "463": "المدثر - حزب 58 - نصف",
  "464": "القيامة - حزب 58 - 5/8",
  "465": "الإنسان - حزب 58 - 3/4",
  "466": "المرسلات - حزب 58 - 7/8",
  "467": "المرسلات - حزب 58 -   ",
  "468": "النبأ - حزب 59 - ثمن",
  "469": "النازعات - حزب 59 - ربع",
  "470": "عبس - حزب 59 - 3/8",
  "471": "التكوير - حزب 59 - نصف",
  "472": "الإنفطار، المطففين - حزب 59 - 5/8",
  "473": "الإنشقاق - حزب 59 - 3/4",
  "474": "البروج - حزب 59 - 7/8",
  "475": "الطارق - حزب 59 -   ",
  "476": "الأعلى، الغاشية - حزب 60 - ثمن",
  "477": "الفجر - حزب 60 - ربع",
  "478": "البلد، الشمس - حزب 60 - 3/8",
  "479": "الليل، الضحى - حزب 60 - نصف",
  "480": "الشرح، التين، العلق - حزب 60 - 5/8",
  "481": "القدر، البينة - حزب 60 - 5/8",
  "482": "الزلزلة، العاديات - حزب 60 - 3/4",
  "483": "القارعة، التكاثر، العصر - حزب 60 - 3/4",
  "484": "الهمزة، الفيل، قريش - حزب 60 - 7/8",
  "485": "الماعون، الكوثر، الكافرون، النصر - حزب 60 -   ",
  "486": "المسد، الإخلاص، الفلق، الناس - حزب 60 -   "
}

Fichier: app/src/main\assets\books\souar_ayat_fadila\chapters.json
{
  "categories": [
    {
      "title": "📖 سور وآيات فاضلة",
      "subcategories": [

        {"name": "الفاتحة", "page": "1"},
        {"name": " بداية البقرة", "page": "2"},
        {"name": "آية الكرسي وآيتين بعدها", "page": "3"},
        {"name": "أواخر سورة البقرة", "page": "4"},
        {"name": "بداية سورة آل عمران", "page": "5"},
        {"name": "الآيات 18، 19 و 26، 27 من سورة آل عمران", "page": "6"},
        {"name": "أواخر سورة آل عمران", "page": "7"},
        {"name": "أواخر سورة التوبة", "page": "8"},
        {"name": "أواخر سورة الكهف", "page": "9"},
        {"name": "سورة السجدة", "page": "10"},
	    {"name": "سورة يس", "page": "13"},
        {"name": "سورة غافر الآيات 1، 2. سورة الدخان", "page": "21"},
        {"name": "سورة الفتح الآية29. سورة الواقعة", "page": "23"},
        {"name": "سورة الحديد", "page": "27"},
        {"name": "سورة الحشر", "page": "32"},
        {"name": "سورة الصف", "page": "35"},
        {"name": "سورة الجمعة", "page": "37"},
        {"name": "سورة التغابن", "page": "39"},
        {"name": "سورة الملك", "page": "41"},
        {"name": "سورة الأعلى", "page": "44"},
        {"name": "سورة الضحى. سورة الشرح", "page": "45"},
        {"name": "سورة العلق. سورة القدر", "page": "46"},
        {"name": "سورة الزلزلة. سورة التكاثر", "page": "47"},
        {"name": "سورة العصر. سورة قريش", "page": "48"},
        {"name": "سورة الماعون. سورة الكوثر", "page": "49"},
        {"name": "سورة الكافرون. سورة النصر", "page": "50"},
        {"name": "سورة الإخلاص. سورة الفلق. سورة الناس", "page": "51"},
        {"name": "سورة الفاتحة. بداية البقرة", "page": "52"}
      ]
    }

  ]
}

Fichier: app/src/main\assets\books\souar_ayat_fadila\config.json
{
  "title": "سور وآيات فاضلة",
  "totalPages": 53,
  "assetsPath": "books/souar_ayat_fadila/pages/",
  "chaptersFile": "books/souar_ayat_fadila/chapters.json",
  "titlesFile": "books/souar_ayat_fadila/title.json"
}

Fichier: app/src/main\assets\books\souar_ayat_fadila\title.json
{
  "1": "الفاتحة",
  "2": "بداية البقرة",
  "3": "آية الكرسي وآيتين بعدها",
  "4": "أواخر سورة البقرة",
  "5": "بداية سورة آل عمران",
  "6": "آيات من سورة آل عمران",
  "7": "أواخر سورة آل عمران",
  "8": "أواخر سورة التوبة",
  "9": "أواخر سورة الكهف",
  "10": "سورة السجدة",
  "13": "سورة يس",
  "19": "سورة غافر الآيات 1، 2. سورة الدخان",
  "20": " سورة الدخان",
  "23": "سورة الفتح الآية 29. سورة الواقعة",
  "24": " سورة الواقعة",
  "27": "سورة الحديد",
  "32": "سورة الحشر",
  "35": "سورة الصف",
  "37": "سورة الجمعة",
  "39": "سورة التغابن",
  "41": "سورة الملك",
  "44": "سورة الأعلى",
  "45": "سورة الضحى. سورة الشرح",
  "46": "سورة العلق. سورة القدر",
  "47": "سورة الزلزلة. سورة التكاثر",
  "48": "سورة العصر. سورة قريش",
  "49": "سورة الماعون. سورة الكوثر",
  "50": "سورة الكافرون. سورة النصر",
  "51": "سورة الإخلاص. سورة الفلق. سورة الناس",
  "52": "سورة الفاتحة",
  "53": " بداية البقرة"
}


Fichier: app/src/main\java\com\education\Quran8\AboutActivity.kt
package com.education.Quran8

import android.content.Intent
import android.os.Bundle
import android.widget.Button
import androidx.appcompat.app.AppCompatActivity

class AboutActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_about)

        val howToUseButton = findViewById<Button>(R.id.howToUseButton)
        val createBookButton = findViewById<Button>(R.id.createBookButton)
        val contactUsButton = findViewById<Button>(R.id.contactUsButton)

        howToUseButton.setOnClickListener {
            val intent = Intent(this, WebViewActivity::class.java)
            intent.putExtra("htmlFile", "how_to_use.html")
            startActivity(intent)
        }

        createBookButton.setOnClickListener {
            val intent = Intent(this, WebViewActivity::class.java)
            intent.putExtra("htmlFile", "how_to_create.html")
            startActivity(intent)
        }

        contactUsButton.setOnClickListener {
            val intent = Intent(this, WebViewActivity::class.java)
            // Pass the contact_us.html file to be loaded in WebViewActivity
            intent.putExtra("htmlFile", "contact_us.html")
            startActivity(intent)
        }
    }
}

Fichier: app/src/main\java\com\education\Quran8\BookConfig.kt
package com.education.Quran8

import android.content.Context
import android.util.Log
import org.json.JSONObject
import java.io.File
import java.io.IOException

data class BookConfig(
    val totalPages: Int,
    val assetsPath: String,
    val title: String,
    val titlesFile: String
) {
    companion object {
        fun loadFromAssets(context: Context, bookName: String): BookConfig? {
            return try {
                val jsonString: String
                val internalFile = File(context.getDir("books", Context.MODE_PRIVATE), "$bookName/config.json")

                if (internalFile.exists()) {
                    Log.d("BookConfig", "Loading config from internal storage: ${internalFile.absolutePath}")
                    jsonString = internalFile.bufferedReader().use { it.readText() }
                } else {
                    val assetPath = "books/$bookName/config.json"
                    Log.d("BookConfig", "Loading config from assets: $assetPath")
                    val inputStream = context.assets.open(assetPath)
                    jsonString = inputStream.bufferedReader().use { it.readText() }
                    inputStream.close()
                }

                val jsonObject = JSONObject(jsonString)
                val totalPages = jsonObject.getInt("totalPages")
                val assetsPath = jsonObject.getString("assetsPath")
                val title = jsonObject.getString("title")
                val titlesFile = jsonObject.getString("titlesFile")

                BookConfig(totalPages, assetsPath, title, titlesFile)
            } catch (e: IOException) {
                Log.e("BookConfig", "Failed to load config for $bookName: ${e.stackTraceToString()}")
                null
            } catch (e: Exception) {
                Log.e("BookConfig", "Error parsing config for $bookName: ${e.stackTraceToString()}")
                null
            }
        }
    }
}
Fichier: app/src/main\java\com\education\Quran8\BookmarkFragment.kt
package com.education.Quran8

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Button
import androidx.fragment.app.DialogFragment

class BookmarkFragment : DialogFragment() {

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
        val view = inflater.inflate(R.layout.fragment_bookmark, container, false)

        val closeButton: Button = view.findViewById(R.id.closeButton)
        closeButton.setOnClickListener { dismiss() }

        return view
    }
}

Fichier: app/src/main\java\com\education\Quran8\ButtonActions.kt
package com.education.Quran8

import android.content.Intent
import android.view.View
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity

object  ButtonActions {

    fun openChapters(view: View, selectedBook: String) {
        Toast.makeText(view.context, "Chapitres affichés", Toast.LENGTH_SHORT).show()
        val activity = view.context as? AppCompatActivity
        activity?.let {
            val chaptersFragment = ChaptersFragment(selectedBook)
            chaptersFragment.show(it.supportFragmentManager, "chaptersFragment")
        }
    }

    fun savePage(view: View) {
        Toast.makeText(view.context, "Page enregistrée", Toast.LENGTH_SHORT).show()
        val activity = view.context as? AppCompatActivity
        activity?.let {
            BookmarkFragment().show(it.supportFragmentManager, "bookmarkFragment")
        }
    }

    fun shareApp(view: View) {
        val context = view.context
        val playStoreLink = "https://play.google.com/store/apps/details?id=com.education.Quran8"
        val shareText = "Check out Quran Reader on Google Play: $playStoreLink"
        val intent = Intent(Intent.ACTION_SEND).apply {
            type = "text/plain"
            putExtra(Intent.EXTRA_TEXT, shareText)
        }
        context.startActivity(Intent.createChooser(intent, "Share Quran Reader via"))
    }

    fun openBookmark(view: View) {
        Toast.makeText(view.context, "Ouverture du marque-page", Toast.LENGTH_SHORT).show()
        val activity = view.context as? AppCompatActivity
        activity?.let {
            BookmarkFragment().show(it.supportFragmentManager, "bookmarkFragment")
        }
    }

    fun openSettings(view: View) {
        Toast.makeText(view.context, "Ouverture des paramètres", Toast.LENGTH_SHORT).show()
        val activity = view.context as? AppCompatActivity
        activity?.let {
            SettingsFragment().show(it.supportFragmentManager, "settingsFragment")
        }
    }
}

Fichier: app/src/main\java\com\education\Quran8\Category_Adapter.kt
package com.education.Quran8

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView

class CategoryAdapter(
    private val categories: List<Category>,
    private val onItemSelected: (Subcategory) -> Unit
) : RecyclerView.Adapter<CategoryAdapter.CategoryViewHolder>() {

    inner class CategoryViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val categoryTitle: TextView = view.findViewById(R.id.categoryTitle)
        val subcategoriesRecyclerView: RecyclerView = view.findViewById(R.id.recyclerViewSubcategories)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CategoryViewHolder {
        val view = LayoutInflater.from(parent.context).inflate(R.layout.item_category, parent, false)
        return CategoryViewHolder(view)
    }

    override fun onBindViewHolder(holder: CategoryViewHolder, position: Int) {
        val category = categories[position]

        holder.categoryTitle?.text = category.title

        holder.categoryTitle?.setOnClickListener {
            holder.subcategoriesRecyclerView?.visibility =
                if (holder.subcategoriesRecyclerView?.visibility == View.VISIBLE) View.GONE else View.VISIBLE
        }

        val reversedSubcategories = category.subcategories.reversed()

        holder.subcategoriesRecyclerView?.apply {
            layoutManager = GridLayoutManager(holder.itemView.context, 3).apply {
                reverseLayout = true
            }
            adapter = SubcategoryAdapter(reversedSubcategories, onItemSelected)
        }
    }

    override fun getItemCount(): Int = categories.size
}

Fichier: app/src/main\java\com\education\Quran8\ChaptersFragment.kt
package com.education.Quran8

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Button
import androidx.fragment.app.DialogFragment
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import org.json.JSONObject

class ChaptersFragment(private val selectedBook: String) : DialogFragment() {

    private var onPageSelected: ((String) -> Unit)? = null

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View? {
        val view = inflater.inflate(R.layout.fragment_chapters, container, false)

        val recyclerView: RecyclerView = view.findViewById(R.id.chapterRecyclerView)
        recyclerView.layoutManager = LinearLayoutManager(requireContext())

        // Load chapters dynamically
        val chapters = loadChapters(selectedBook)
        recyclerView.adapter = CategoryAdapter(chapters) { subcategory ->
            onPageSelected?.invoke(subcategory.page)
            dismiss()
        }

        val closeButton: Button = view.findViewById(R.id.closeButton)
        closeButton.setOnClickListener { dismiss() }

        return view
    }

    private fun loadChapters(bookName: String): List<Category> {
        val categories = mutableListOf<Category>()
        try {
            val inputStream = requireContext().assets.open("books/$bookName/chapters.json")
            val jsonString = inputStream.bufferedReader().use { it.readText() }
            val jsonObject = JSONObject(jsonString)
            val jsonArray = jsonObject.getJSONArray("categories")

            for (i in 0 until jsonArray.length()) {
                val categoryJson = jsonArray.getJSONObject(i)
                val title = categoryJson.getString("title")
                val subcategoriesJson = categoryJson.getJSONArray("subcategories")
                val subcategories = mutableListOf<Subcategory>()

                for (j in 0 until subcategoriesJson.length()) {
                    val subcategoryJson = subcategoriesJson.getJSONObject(j)
                    subcategories.add(
                        Subcategory(
                            name = subcategoryJson.getString("name"),
                            page = subcategoryJson.getString("page")
                        )
                    )
                }
                categories.add(Category(title, subcategories))
            }
        } catch (e: Exception) {
            e.printStackTrace()
        }
        return categories
    }

    fun setOnPageSelectedListener(listener: (String) -> Unit) {
        onPageSelected = listener
    }
}

// Data classes for Category and Subcategory
data class Category(
    val title: String,
    val subcategories: List<Subcategory> = emptyList()
)

data class Subcategory(
    val name: String,
    val page: String
)

Fichier: app/src/main\java\com\education\Quran8\DialogUtils.kt
package com.education.Quran8

import android.content.Context
import android.graphics.Color
import android.graphics.drawable.ColorDrawable
import android.view.LayoutInflater
import android.widget.LinearLayout
import android.widget.Toast
import androidx.appcompat.app.AlertDialog

fun showCustomDialog(context: Context) {
    val dialogView = LayoutInflater.from(context).inflate(R.layout.dialog_menu, null)
    val dialog = AlertDialog.Builder(context)
        .setView(dialogView)
        .create()

    dialogView.findViewById<LinearLayout>(R.id.menu_donate)?.setOnClickListener {
        Toast.makeText(context, context.getString(R.string.contact_us), Toast.LENGTH_SHORT).show()
        dialog.dismiss()
    }
    dialogView.findViewById<LinearLayout>(R.id.menu_tafsir)?.setOnClickListener {
        Toast.makeText(context, context.getString(R.string.tafsir), Toast.LENGTH_SHORT).show()
        dialog.dismiss()
    }
    dialogView.findViewById<LinearLayout>(R.id.menu_audio)?.setOnClickListener {
        Toast.makeText(context, context.getString(R.string.audio), Toast.LENGTH_SHORT).show()
        dialog.dismiss()
    }
    dialogView.findViewById<LinearLayout>(R.id.menu_download)?.setOnClickListener {
        Toast.makeText(context, context.getString(R.string.download), Toast.LENGTH_SHORT).show()
        dialog.dismiss()
    }

    dialog.window?.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT))
    dialog.show()
}

Fichier: app/src/main\java\com\education\Quran8\dialog_home_menu.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/dialog_background"
    android:orientation="vertical"
    android:padding="8dp"
    android:layoutDirection="ltr"
    android:textDirection="ltr">

    <LinearLayout
        android:id="@+id/menu_donate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">
        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/ic_zoom"
            android:layout_marginStart="8dp"/>
        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="@string/contact_us"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray" />

    <LinearLayout
        android:id="@+id/menu_tafsir"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">
        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/recherche"
            app:tint="@android:color/white"
            android:layout_marginStart="8dp"/>
        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="@string/tafsir"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray" />

    <LinearLayout
        android:id="@+id/menu_audio"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">
        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/ic_audio"
            android:layout_marginStart="8dp"/>
        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="@string/audio"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray" />

    <LinearLayout
        android:id="@+id/menu_download"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">
        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/ic_download"
            android:layout_marginStart="8dp"/>
        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="@string/download"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray" />

    <LinearLayout
        android:id="@+id/menu_manage_books"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">
        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/ic_book"
            android:layout_marginStart="8dp"/>
        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="@string/manage_books"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:layout_marginStart="10dp"/>
    </LinearLayout>
</LinearLayout>
Fichier: app/src/main\java\com\education\Quran8\FormActivity.kt
package com.education.Quran8

import android.os.Bundle
import android.webkit.WebView
import android.webkit.WebViewClient
import androidx.appcompat.app.AppCompatActivity

class FormActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_form)

        val webView = findViewById<WebView>(R.id.webView)

        // Enable JavaScript and DOM storage if needed
        webView.settings.javaScriptEnabled = true
        webView.settings.domStorageEnabled = true

        // Make links and redirects open in the same WebView
        webView.webViewClient = WebViewClient()

        // Load your Google Form URL
        val formUrl = "https://forms.gle/F5xXeSGYRkESDKX37"
        webView.loadUrl(formUrl)
    }
}

Fichier: app/src/main\java\com\education\Quran8\HomeActivity.kt
package com.education.Quran8

import android.content.Context
import android.content.Intent
import android.content.SharedPreferences
import android.content.res.Configuration
import android.net.Uri
import android.os.Bundle
import android.util.Log
import android.view.LayoutInflater
import android.view.View
import android.widget.*
import androidx.activity.result.contract.ActivityResultContracts
import androidx.appcompat.app.AlertDialog
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import java.io.File
import java.io.FileOutputStream
import java.util.*
import java.util.zip.ZipInputStream
import android.app.ProgressDialog
import android.view.ViewGroup
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import org.json.JSONObject
import java.io.IOException

class HomeActivity : AppCompatActivity(),
    com.education.Quran8.SettingsFragment.SettingsChangeListener {

    private var books = mutableListOf<String>()
    private lateinit var recyclerView: RecyclerView
    private lateinit var adapter: com.education.Quran8.BookCarouselAdapter
    private lateinit var closeButton: ImageView
    private lateinit var menuLayout: LinearLayout
    private lateinit var manageBooksButton: ImageView
    private lateinit var aboutLink: TextView
    private lateinit var progressDialog: ProgressDialog
    private lateinit var sharedPreferences: SharedPreferences

    private val pickZipFile = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { result ->
        if (result.resultCode == RESULT_OK) {
            result.data?.data?.let { uri -> handleZipFile(uri) }
        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        Log.d("HomeActivity", "onCreate started")
        sharedPreferences = getSharedPreferences("AppSettings", MODE_PRIVATE)
        val language = sharedPreferences.getString("Language", "en") ?: "en"
        setLocale(language)
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_home)
        Log.d("HomeActivity", "setContentView completed")

        loadBooksFromAssets()
        loadAdditionalBooks()

        recyclerView = findViewById(R.id.bookCarousel)
        adapter = com.education.Quran8.BookCarouselAdapter(
            this,
            books
        ) { bookName ->
            val intent = Intent(
                this,
                com.education.Quran8.MainActivity::class.java
            )
            intent.putExtra("selectedBook", bookName)
            intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP or Intent.FLAG_ACTIVITY_CLEAR_TOP)
            startActivity(intent)
            Log.d("HomeActivity", "Opening book: $bookName")
        }
        recyclerView.layoutManager = LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false)
        recyclerView.adapter = adapter
        recyclerView.layoutDirection = View.LAYOUT_DIRECTION_LTR
        Log.d("HomeActivity", "RecyclerView initialized")

        sortBooksAlphabetically()
        adapter.notifyDataSetChanged()
        Log.d("HomeActivity", "Books sorted and adapter notified")

        closeButton = findViewById(R.id.closeButton)
        menuLayout = findViewById(R.id.menuLayout)
        manageBooksButton = findViewById(R.id.manageBooksButton)
        aboutLink = findViewById(R.id.aboutLink)

        closeButton.visibility = View.VISIBLE
        menuLayout.visibility = View.VISIBLE
        Log.d("HomeActivity", "Initial visibility set to VISIBLE for closeButton and menuLayout")

        closeButton.setOnClickListener { finish() }
        manageBooksButton.setOnClickListener { showManageBooksDialog() }
        aboutLink.setOnClickListener {
            val intent = Intent(this, com.education.Quran8.AboutActivity::class.java)
            startActivity(intent)
        }
        Log.d("HomeActivity", "Click listeners set")

        window.decorView.systemUiVisibility = (
                View.SYSTEM_UI_FLAG_FULLSCREEN or
                        View.SYSTEM_UI_FLAG_HIDE_NAVIGATION or
                        View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                )
        Log.d("HomeActivity", "Immersive mode set")

        progressDialog = ProgressDialog(this).apply {
            setMessage("Installing book...")
            setProgressStyle(ProgressDialog.STYLE_HORIZONTAL)
            setCancelable(false)
            max = 100
        }



        Log.d("HomeActivity", "ProgressDialog initialized")
        Log.d("HomeActivity", "onCreate completed")
    }

    override fun onNewIntent(intent: Intent?) {
        super.onNewIntent(intent)
        Log.d("HomeActivity", "onNewIntent called")
    }

    override fun onResume() {
        super.onResume()
        closeButton.visibility = View.VISIBLE
        menuLayout.visibility = View.VISIBLE
        window.decorView.systemUiVisibility = (
                View.SYSTEM_UI_FLAG_FULLSCREEN or
                        View.SYSTEM_UI_FLAG_HIDE_NAVIGATION or
                        View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                )
        Log.d("HomeActivity", "onResume: visibility ensured for closeButton and menuLayout")
    }

    override fun onConfigurationChanged(newConfig: Configuration) {
        super.onConfigurationChanged(newConfig)
        closeButton.visibility = View.VISIBLE
        menuLayout.visibility = View.VISIBLE
        recyclerView.layoutManager = LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false)
        recyclerView.layoutDirection = View.LAYOUT_DIRECTION_LTR
        Log.d("HomeActivity", "onConfigurationChanged: visibility ensured for closeButton and menuLayout")
    }

    private fun showManageBooksDialog() {
        val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_manage_books, null)
        val dialog = AlertDialog.Builder(this)
            .setView(dialogView)
            .create()

        val bookSpinner = dialogView.findViewById<Spinner>(R.id.bookSpinner)
        val addBookButton = dialogView.findViewById<Button>(R.id.addBookButton)
        val deleteBookButton = dialogView.findViewById<Button>(R.id.deleteBookButton)
        val selectDefaultBookButton = dialogView.findViewById<Button>(R.id.selectDefaultBookButton)
        val closeButton = dialogView.findViewById<Button>(R.id.closeButton)

        val bookTitles = books.map { bookName ->
            val config =
                com.education.Quran8.BookConfig.Companion.loadFromAssets(
                    this,
                    bookName
                )
            config?.title ?: bookName
        }
        val spinnerAdapter = ArrayAdapter(this, android.R.layout.simple_spinner_item, bookTitles)
        spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
        bookSpinner.adapter = spinnerAdapter
        Log.d("HomeActivity", "ManageBooks dialog spinner initialized with ${bookTitles.size} books")

        addBookButton.setOnClickListener {
            val intent = Intent(Intent.ACTION_GET_CONTENT)
            intent.type = "application/zip"
            pickZipFile.launch(intent)
            Log.d("HomeActivity", "Add book button clicked, launching file picker")
        }

        deleteBookButton.setOnClickListener {
            val selectedIndex = bookSpinner.selectedItemPosition
            val selectedBook = books[selectedIndex]
            AlertDialog.Builder(this)
                .setTitle("Confirm Deletion")
                .setMessage("Are you sure you want to delete '${bookTitles[selectedIndex]}'?")
                .setPositiveButton("Yes") { _, _ ->
                    books.removeAt(selectedIndex)
                    sortBooksAlphabetically()
                    adapter.notifyDataSetChanged()
                    deleteBookFiles(selectedBook)
                    saveBooks()
                    Toast.makeText(this, "Book '${bookTitles[selectedIndex]}' deleted", Toast.LENGTH_SHORT).show()
                    Log.d("HomeActivity", "Book '$selectedBook' deleted and list saved")
                    dialog.dismiss()
                }
                .setNegativeButton("No", null)
                .show()
        }

        selectDefaultBookButton.setOnClickListener {
            val selectedIndex = bookSpinner.selectedItemPosition
            val selectedBook = books[selectedIndex]
            sharedPreferences.edit().putString("defaultBook", selectedBook).apply()
            Toast.makeText(this, "'${bookTitles[selectedIndex]}' set as default book", Toast.LENGTH_SHORT).show()
            Log.d("HomeActivity", "'$selectedBook' set as default book")
        }

        closeButton.setOnClickListener { dialog.dismiss() }

        dialog.window?.setBackgroundDrawableResource(android.R.color.transparent)
        dialog.show()
        Log.d("HomeActivity", "ManageBooks dialog shown")
    }

    private fun deleteBookFiles(bookName: String) {
        val bookDir = File(getDir("books", MODE_PRIVATE), bookName)
        if (bookDir.exists()) {
            bookDir.deleteRecursively()
            Log.d("HomeActivity", "Deleted book directory: ${bookDir.absolutePath}")
        } else {
            Log.e("HomeActivity", "Book directory not found for deletion: ${bookDir.absolutePath}")
        }
    }

    private fun handleZipFile(uri: Uri) {
        progressDialog.setProgress(0)
        progressDialog.show()
        Log.d("HomeActivity", "Handling ZIP file from URI: $uri")

        CoroutineScope(Dispatchers.IO).launch {
            try {
                contentResolver.openInputStream(uri)?.use { inputStream ->
                    val zipInputStream = ZipInputStream(inputStream)
                    var entry = zipInputStream.nextEntry

                    var configJson: String? = null
                    var configPath: String? = null
                    val entries = mutableListOf<Pair<String, ByteArray>>()

                    // Collect all entries and locate config.json
                    while (entry != null) {
                        val fileName = entry.name
                        if (!entry.isDirectory) {
                            val byteArrayOutputStream = java.io.ByteArrayOutputStream()
                            val buffer = ByteArray(1024)
                            var len: Int
                            while (zipInputStream.read(buffer).also { len = it } > 0) {
                                byteArrayOutputStream.write(buffer, 0, len)
                            }
                            val content = byteArrayOutputStream.toByteArray()
                            entries.add(fileName to content)
                            if (fileName.endsWith("config.json")) {
                                configJson = String(content)
                                configPath = fileName
                            }
                        }
                        zipInputStream.closeEntry()
                        entry = zipInputStream.nextEntry
                    }
                    zipInputStream.close()

                    if (configJson == null) throw IllegalArgumentException("Missing config.json")
                    if (entries.none { it.first.contains("pages/") }) {
                        throw IllegalArgumentException("Missing pages/ directory")
                    }

                    // Extract title
                    val jsonObject = JSONObject(configJson)
                    val title = jsonObject.getString("title")
                    Log.d("HomeActivity", "Extracted title from config.json: $title")

                    val bookDir = File(getDir("books", MODE_PRIVATE), title)
                    bookDir.mkdirs()
                    Log.d("HomeActivity", "Unzipping ZIP file to: ${bookDir.absolutePath} with book name: $title")

                    // Extract and flatten structure
                    for ((fileName, content) in entries) {
                        val targetFileName = when {
                            fileName.endsWith("config.json") -> "config.json"
                            fileName.contains("pages/") -> {
                                val pagePath = fileName.substringAfter("pages/")
                                if (pagePath.isEmpty()) continue
                                "pages/$pagePath"
                            }
                            else -> continue // Skip unrelated files
                        }
                        val targetFile = File(bookDir, targetFileName)
                        targetFile.parentFile?.mkdirs()
                        FileOutputStream(targetFile).use { output ->
                            output.write(content)
                        }
                        Log.d("HomeActivity", "Wrote file: ${targetFile.absolutePath}")
                    }

                    // Log extracted structure for debugging
                    val extractedFiles = bookDir.walk().map { it.relativeTo(bookDir).path }.joinToString(", ")
                    Log.d("HomeActivity", "Extracted structure in $title: $extractedFiles")

                    // Validate extracted structure
                    val configFile = File(bookDir, "config.json")
                    val pagesDirFile = File(bookDir, "pages")
                    if (!configFile.exists() || !pagesDirFile.exists() || !pagesDirFile.isDirectory || pagesDirFile.listFiles()?.isEmpty() != false) {
                        bookDir.deleteRecursively()
                        throw IllegalStateException("Invalid book structure after extraction: config.json=${configFile.exists()}, pages=${pagesDirFile.exists() && pagesDirFile.isDirectory}")
                    }

                    withContext(Dispatchers.Main) {
                        if (books.contains(title)) {
                            Toast.makeText(this@HomeActivity, "Book '$title' already exists", Toast.LENGTH_SHORT).show()
                            Log.w("HomeActivity", "Book '$title' already in list")
                        } else {
                            books.add(title)
                            sortBooksAlphabetically()
                            adapter.notifyDataSetChanged()
                            saveBooks()
                            Toast.makeText(this@HomeActivity, "Book '$title' added", Toast.LENGTH_SHORT).show()
                            Log.d("HomeActivity", "Book '$title' added and list saved")
                        }
                        progressDialog.dismiss()
                    }
                } ?: throw Exception("Failed to open ZIP file")
            } catch (e: Exception) {
                withContext(Dispatchers.Main) {
                    Toast.makeText(this@HomeActivity, "Error installing book: ${e.message}", Toast.LENGTH_LONG).show()
                    Log.e("HomeActivity", "Error unzipping: ${e.stackTraceToString()}")
                    progressDialog.dismiss()
                }
            }
        }
    }

    private fun loadBooksFromAssets() {
        CoroutineScope(Dispatchers.IO).launch {
            try {
                val assetManager = assets
                val bookItems = assetManager.list("books") ?: emptyArray()
                Log.d("HomeActivity", "Found items in assets/books/: ${bookItems.joinToString(", ")}")

                for (item in bookItems) {
                    val bookName = item.removeSuffix(".zip")
                    val isZip = item.endsWith(".zip")
                    val bookDir = File(getDir("books", MODE_PRIVATE), bookName)

                    if (isZip) {
                        if (!bookDir.exists()) {
                            Log.d("HomeActivity", "Unzipping pre-installed book: $item")
                            assetManager.open("books/$item").use { inputStream ->
                                val zipInputStream = ZipInputStream(inputStream)
                                var entry = zipInputStream.nextEntry

                                var configJson: String? = null
                                var hasPages = false
                                var rootFolder: String? = null
                                val entries = mutableListOf<Pair<String, ByteArray>>()

                                while (entry != null) {
                                    val fileName = entry.name
                                    if (entry.isDirectory) {
                                        if (fileName.startsWith("pages/")) hasPages = true
                                    } else {
                                        val byteArrayOutputStream = java.io.ByteArrayOutputStream()
                                        val buffer = ByteArray(1024)
                                        var len: Int
                                        while (zipInputStream.read(buffer).also { len = it } > 0) {
                                            byteArrayOutputStream.write(buffer, 0, len)
                                        }
                                        val content = byteArrayOutputStream.toByteArray()
                                        entries.add(fileName to content)
                                        if (fileName.endsWith("config.json")) {
                                            configJson = String(content)
                                        }
                                        if (fileName.contains("pages/")) hasPages = true
                                    }
                                    zipInputStream.closeEntry()
                                    entry = zipInputStream.nextEntry
                                }
                                zipInputStream.close()

                                if (configJson == null) {
                                    Log.e("HomeActivity", "Skipping $bookName: Missing config.json in ZIP")
                                    //continue
                                }
                                if (!hasPages) {
                                    Log.e("HomeActivity", "Skipping $bookName: Missing pages/ directory in ZIP")
                                    //continue
                                }

                                if (entries.isNotEmpty()) {
                                    val firstEntryName = entries[0].first
                                    if (firstEntryName.contains("/")) {
                                        val potentialRoot = firstEntryName.substringBefore("/")
                                        if (entries.all { it.first.startsWith("$potentialRoot/") || it.first == potentialRoot }) {
                                            rootFolder = potentialRoot
                                            Log.d("HomeActivity", "Detected root folder in ZIP $item: $rootFolder")
                                        }
                                    }
                                }

                                for ((fileName, content) in entries) {
                                    var targetFileName = fileName
                                    if (rootFolder != null && targetFileName.startsWith("$rootFolder/")) {
                                        targetFileName = targetFileName.removePrefix("$rootFolder/")
                                    }
                                    if (targetFileName.isEmpty()) continue

                                    val targetFile = File(bookDir, targetFileName)
                                    targetFile.parentFile?.mkdirs()
                                    FileOutputStream(targetFile).use { output ->
                                        output.write(content)
                                    }
                                    Log.d("HomeActivity", "Wrote pre-installed file: ${targetFile.absolutePath}")
                                }
                            }
                        }
                    } else {
                        val hasConfig = try {
                            assetManager.open("books/$bookName/config.json").close()
                            true
                        } catch (e: IOException) {
                            false
                        }
                        val hasPages = assetManager.list("books/$bookName/pages")?.isNotEmpty() == true

                        if (!hasConfig) {
                            Log.e("HomeActivity", "Skipping $bookName: Missing config.json in directory")
                            continue
                        }
                        if (!hasPages) {
                            Log.e("HomeActivity", "Skipping $bookName: Missing pages/ directory")
                            continue
                        }
                        Log.d("HomeActivity", "Found valid unzipped book directory: $bookName")
                    }

                    if (!books.contains(bookName)) {
                        books.add(bookName)
                        Log.d("HomeActivity", "Added book to list: $bookName (from ${if (isZip) "ZIP" else "directory"})")
                    }
                }

                withContext(Dispatchers.Main) {
                    if (books.isEmpty()) {
                        books.addAll(listOf("quran", "Douaa", "souar_ayat_fadila"))
                        Log.d("HomeActivity", "No valid books found in assets, using defaults: ${books.joinToString(", ")}")
                    }
                    sortBooksAlphabetically()
                    adapter.notifyDataSetChanged()
                    Log.d("HomeActivity", "Books loaded and sorted: ${books.joinToString(", ")}")
                }
            } catch (e: Exception) {
                Log.e("HomeActivity", "Error loading books from assets: ${e.stackTraceToString()}")
                withContext(Dispatchers.Main) {
                    if (books.isEmpty()) {
                        books.addAll(listOf("quran", "Douaa", "souar_ayat_fadila"))
                        Log.d("HomeActivity", "Error occurred, using defaults: ${books.joinToString(", ")}")
                    }
                    sortBooksAlphabetically()
                    adapter.notifyDataSetChanged()
                }
            }
        }
    }

    private fun loadAdditionalBooks() {
        val savedBooks = sharedPreferences.getString("bookList", null)
        if (!savedBooks.isNullOrEmpty()) {
            val additionalBooks = savedBooks.split(",").map { it.trim() }.filter { it !in books }
            books.addAll(additionalBooks)
            Log.d("HomeActivity", "Loaded additional books from SharedPreferences: $additionalBooks")
        }
        saveBooks()
    }

    private fun sortBooksAlphabetically() {
        books.sortBy { bookName ->
            val config =
                com.education.Quran8.BookConfig.Companion.loadFromAssets(
                    this,
                    bookName
                )
            config?.title?.lowercase() ?: bookName.lowercase()
        }
        Log.d("HomeActivity", "Books sorted alphabetically: ${books.joinToString(", ")}")
    }

    private fun saveBooks() {
        val editor = sharedPreferences.edit()
        editor.putString("bookList", books.joinToString(","))
        editor.apply()
        Log.d("HomeActivity", "Saved book list: ${books.joinToString(",")}")
    }

    private fun setLocale(language: String) {
        val validLanguage = if (language in listOf("en", "ar")) language else "en"
        val locale = Locale(validLanguage)
        Locale.setDefault(locale)
        val config = Configuration()
        config.setLocale(locale)
        resources.updateConfiguration(config, resources.displayMetrics)
        Log.d("HomeActivity", "Locale set to: $validLanguage")
    }

    override fun onNightModeChanged(isEnabled: Boolean) {
        recreate()
        Log.d("HomeActivity", "Night mode changed, recreating activity")
    }

    override fun onScrollOrientationChanged(isHorizontal: Boolean) {}
    override fun onScrollDirectionChanged(isRightToLeft: Boolean) {}
    override fun onFullscreenModeChanged(isEnabled: Boolean) {}
    override fun onKeepScreenOnChanged(isEnabled: Boolean) {}
}

class BookCarouselAdapter(
    private val context: Context,
    private val books: MutableList<String>,
    private val onBookSelected: (String) -> Unit
) : RecyclerView.Adapter<com.education.Quran8.BookCarouselAdapter.BookViewHolder>() {

    inner class BookViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val bookImage: ImageView = view.findViewById(R.id.bookImage)
        val bookTitle: TextView = view.findViewById(R.id.bookTitle)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): com.education.Quran8.BookCarouselAdapter.BookViewHolder {
        val view = LayoutInflater.from(parent.context).inflate(R.layout.item_book_carousel, parent, false)
        return BookViewHolder(view)
    }

    override fun onBindViewHolder(holder: com.education.Quran8.BookCarouselAdapter.BookViewHolder, position: Int) {
        val bookName = books[position]
        try {
            val inputStream = try {
                val assetPathPage0 = "books/$bookName/pages/page0.jpg"
                Log.d("Carousel", "Trying assets for page0: $assetPathPage0")
                context.assets.open(assetPathPage0)
            } catch (e: Exception) {
                val internalPathPage0 = File(context.getDir("books", Context.MODE_PRIVATE), "$bookName/pages/page0.jpg")
                if (internalPathPage0.exists()) {
                    Log.d("Carousel", "Found page0 in internal storage: ${internalPathPage0.absolutePath}")
                    internalPathPage0.inputStream()
                } else {
                    val assetPathPage1 = "books/$bookName/pages/page1.jpg"
                    Log.d("Carousel", "Falling back to assets for page1: $assetPathPage1")
                    try {
                        context.assets.open(assetPathPage1)
                    } catch (e: Exception) {
                        val internalPathPage1 = File(context.getDir("books", Context.MODE_PRIVATE), "$bookName/pages/page1.jpg")
                        Log.d("Carousel", "Trying internal storage for page1: ${internalPathPage1.absolutePath}")
                        if (internalPathPage1.exists()) {
                            internalPathPage1.inputStream()
                        } else {
                            throw IOException("Neither page0.jpg nor page1.jpg found for $bookName")
                        }
                    }
                }
            }
            val bitmap = android.graphics.BitmapFactory.decodeStream(inputStream)
            holder.bookImage.setImageBitmap(bitmap)
            inputStream.close()
            Log.d("Carousel", "Loaded image for $bookName successfully")
        } catch (e: Exception) {
            Log.e("Carousel", "Failed to load image for $bookName: ${e.message}")
            e.printStackTrace()
            holder.bookImage.setImageResource(R.drawable.placeholder)
        }

        val config =
            com.education.Quran8.BookConfig.Companion.loadFromAssets(
                context,
                bookName
            )
        val title = config?.title ?: bookName
        holder.bookTitle.text = title
        Log.d("Carousel", "Set title for $bookName: $title")

        holder.bookImage.setOnClickListener { onBookSelected(bookName) }
    }

    override fun getItemCount(): Int = books.size
}
Fichier: app/src/main\java\com\education\Quran8\ImageAdapter.kt
package com.education.Quran8

import android.content.Context
import android.content.res.Configuration
import android.content.res.Resources
import android.graphics.BitmapFactory
import android.graphics.ColorMatrix
import android.graphics.ColorMatrixColorFilter
import android.util.Log
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageView
import androidx.core.widget.NestedScrollView
import androidx.recyclerview.widget.RecyclerView
import java.io.IOException

class ImageAdapter(
    private val context: Context,
    private val imagePaths: List<String>
) : RecyclerView.Adapter<ImageAdapter.ImageViewHolder>() {

    var isNightMode: Boolean = false

    inner class ImageViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val imageView: ImageView = view.findViewById(R.id.imageView)
        val scrollView: NestedScrollView? = view.findViewById(R.id.scrollView) // Only exists in landscape mode
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ImageViewHolder {
        val orientation = context.resources.configuration.orientation
        val layoutRes = if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            R.layout.item_image // Uses res/layout-land/item_image.xml
        } else {
            R.layout.item_image // Uses res/layout/item_image.xml
        }

        val view = LayoutInflater.from(parent.context).inflate(layoutRes, parent, false)
        return ImageViewHolder(view)
    }
    override fun onBindViewHolder(holder: ImageViewHolder, position: Int) {
        val imagePath = imagePaths[position]
        try {
            val inputStream = context.assets.open(imagePath)
            val bitmap = BitmapFactory.decodeStream(inputStream)
            holder.imageView.setImageBitmap(bitmap)
            inputStream.close()

            // Apply night mode if enabled
            if (isNightMode) applyNightMode(holder.imageView)

            val screenHeight = Resources.getSystem().displayMetrics.heightPixels
            val screenWidth = Resources.getSystem().displayMetrics.widthPixels
            val aspectRatio = bitmap.width.toFloat() / bitmap.height.toFloat()

            if (context.resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT) {
                holder.imageView.layoutParams.height = ViewGroup.LayoutParams.MATCH_PARENT
                holder.imageView.layoutParams.width = ViewGroup.LayoutParams.MATCH_PARENT // ✅ Ensure full width
            } else {
                val newHeight = (screenWidth / aspectRatio).toInt()
                holder.imageView.layoutParams.height = newHeight
                holder.imageView.layoutParams.width = ViewGroup.LayoutParams.MATCH_PARENT // ✅ Ensure full width
            }

            holder.imageView.requestLayout() // ✅ Force layout refresh

        } catch (e: IOException) {
            e.printStackTrace()
        }
    }





    override fun getItemCount(): Int = imagePaths.size

    private fun applyNightMode(imageView: ImageView) {
        Log.e("DEBUG_NIGHT_MODE", "🌙 Night mode applied to image!")
        val matrix = ColorMatrix().apply {
            set(
                floatArrayOf(
                    -1f, 0f, 0f, 0f, 255f,
                    0f, -1f, 0f, 0f, 255f,
                    0f, 0f, -1f, 0f, 255f,
                    0f, 0f, 0f, 1f, 0f
                )
            )
        }
        imageView.colorFilter = ColorMatrixColorFilter(matrix)
    }
}

Fichier: app/src/main\java\com\education\Quran8\LanguageManager.kt
package com.education.Quran8

import android.content.Context
import android.content.SharedPreferences
import java.util.*

object LanguageManager {

    fun setLanguage(context: Context, language: String) {
        val locale = Locale(language)
        Locale.setDefault(locale)
        val config = context.resources.configuration
        config.setLocale(locale)
        context.resources.updateConfiguration(config, context.resources.displayMetrics)

        val prefs = context.getSharedPreferences("AppSettings", Context.MODE_PRIVATE)
        prefs.edit().putString("Language", language).apply()
    }

    fun loadLanguage(context: Context, prefs: SharedPreferences) {
        val language = prefs.getString("Language", "en") ?: "en"
        setLanguage(context, language)
    }
}
Fichier: app/src/main\java\com\education\Quran8\MainActivity.kt
package com.education.Quran8

import android.content.Intent
import android.content.SharedPreferences
import android.content.res.Configuration
import android.os.Bundle
import android.util.Log
import android.view.GestureDetector
import android.view.LayoutInflater
import android.view.MotionEvent
import android.view.View
import android.view.WindowManager
import android.widget.Button
import android.widget.CheckBox
import android.widget.FrameLayout
import android.widget.ImageView
import android.widget.LinearLayout
import android.widget.TextView
import android.widget.Toast
import androidx.appcompat.app.AlertDialog
import androidx.appcompat.app.AppCompatActivity
import androidx.appcompat.app.AppCompatDelegate
import androidx.viewpager2.widget.ViewPager2
import androidx.core.widget.NestedScrollView
import org.json.JSONObject
import android.os.Handler
import android.os.Looper // ADDED: For Handler

class MainActivity : AppCompatActivity(), SettingsFragment.SettingsChangeListener {

    private lateinit var viewPager: ViewPager2
    private lateinit var menuLayout: LinearLayout
    private lateinit var gestureDetector: GestureDetector
    private lateinit var closeButton: ImageView
    private lateinit var homeButton: ImageView
    private lateinit var openChaptersButton: ImageView
    private lateinit var savePageButton: ImageView
    private lateinit var shareAppButton: ImageView
    private lateinit var openBookmarkButton: ImageView
    private lateinit var openSettingsButton: ImageView
    private lateinit var sharedPreferences: SharedPreferences
    private lateinit var adapter: ImageAdapter
    private lateinit var pageInfoBanner: LinearLayout
    private lateinit var pageInfoText: TextView
    private lateinit var titleText: TextView
    private lateinit var titleOverlay: FrameLayout
    private lateinit var bookConfig: BookConfig
    private lateinit var selectedBook: String

    private var imageList: MutableList<String> = mutableListOf()
    private var titleMap: MutableMap<Int, String> = mutableMapOf()
    private val savedPages = mutableListOf<Int>()
    private var isNightMode = false

    private val hideBannerRunnable = Runnable {
        pageInfoBanner.visibility = View.GONE
    }
    private val hideTitleRunnable = Runnable {
        titleOverlay?.visibility = View.GONE
        titleText?.visibility = View.GONE
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        Log.e("DEBUG_APP_Night", "🌙 Restoring Night Mode = $isNightMode")

        // Apply night mode before rendering UI
        sharedPreferences = getSharedPreferences("AppSettings", MODE_PRIVATE)
        isNightMode = sharedPreferences.getBoolean("NightMode", false)
        AppCompatDelegate.setDefaultNightMode(
            if (isNightMode) AppCompatDelegate.MODE_NIGHT_YES
            else AppCompatDelegate.MODE_NIGHT_NO
        )

        super.onCreate(savedInstanceState)

        try {
            setContentView(R.layout.activity_main)
            val scrollView: NestedScrollView? = findViewById(R.id.scrollView)
            Log.e("DEBUG_APP", "✅ MainActivity - onCreate() exécuté !")
        } catch (e: Exception) {
            Log.e("DEBUG_APP", "❌ ERREUR dans onCreate(): ${e.message}")
        }

        val settingsPrefs = getSharedPreferences("AppSettings", MODE_PRIVATE)
        selectedBook = intent.getStringExtra("selectedBook") ?: settingsPrefs.getString("defaultBook", "quran") ?: "quran"


        Log.d("MainActivity", "Selected book: $selectedBook")

            // Get selected book from intent
       // var selectedBook = intent.getStringExtra("selectedBook") ?: "quran" // Default to "quran"
        bookConfig = BookConfig.loadFromAssets(this, selectedBook) ?: run {
            Toast.makeText(this, "Error loading book configuration", Toast.LENGTH_SHORT).show()
            finish()
            return
        }

        // Load images
        imageList.clear()
        imageList.addAll((1..bookConfig.totalPages).map { "${bookConfig.assetsPath.trimEnd('/')}/page$it.jpg" })
        Log.d("DEBUG_IMAGE_LOADING", "Total Pages: ${bookConfig.totalPages}")
        Log.d("DEBUG_IMAGE_LOADING", "Assets Path: ${bookConfig.assetsPath}")

        // Initialize ViewPager
        viewPager = findViewById(R.id.viewPager)
        adapter = ImageAdapter(this, imageList)
        adapter.isNightMode = isNightMode
        viewPager.adapter = adapter
        viewPager.setCurrentItem(0, false) // Start at first page
        viewPager.offscreenPageLimit = 3
        viewPager.isUserInputEnabled = true

        // Load titles from titles.json
        loadTitles(selectedBook)

        // Fullscreen and immersive mode
        window.decorView.systemUiVisibility = (
                View.SYSTEM_UI_FLAG_FULLSCREEN or
                        View.SYSTEM_UI_FLAG_HIDE_NAVIGATION or
                        View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                )

        // Load Keep Screen On Setting
        val isKeepScreenOn = sharedPreferences.getBoolean("KeepScreenOn", true)
        if (isKeepScreenOn) {
            window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        } else {
            window.clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        }

        // Initialize Views
        menuLayout = findViewById(R.id.menuLayout)
        closeButton = findViewById(R.id.closeButton)
        homeButton = findViewById(R.id.homeButton)
        openChaptersButton = findViewById(R.id.openChapters)
        savePageButton = findViewById(R.id.savePage)
        shareAppButton = findViewById(R.id.shareApp)
        openBookmarkButton = findViewById(R.id.openBookmark)
        openSettingsButton = findViewById(R.id.openSettings)
        pageInfoBanner = findViewById(R.id.pageInfoBanner)
        pageInfoText = findViewById(R.id.pageInfoText)
        titleText = findViewById(R.id.titleText)
        titleOverlay = findViewById(R.id.titleOverlay)

        // Adjust banner position
        adjustBannerPosition()
        pageInfoBanner.visibility = View.GONE

        // Hide views initially
        closeButton.visibility = View.GONE
        menuLayout.visibility = View.GONE
        homeButton.visibility = View.GONE

        // Load scroll settings
        configureViewPagerOrientation(sharedPreferences.getBoolean("ScrollOrientation", true))
        loadSavedPages()

        // Set up button actions
        closeButton.setOnClickListener { finish() }
        homeButton.setOnClickListener {
            startActivity(Intent(this, com.education.Quran8.HomeActivity::class.java))
        }
        openSettingsButton.setOnClickListener { SettingsFragment().show(supportFragmentManager, "SettingsFragment") }
        savePageButton.setOnClickListener { saveCurrentPage() }
        openBookmarkButton.setOnClickListener { showSavedPagesDialog() }
        openChaptersButton.setOnClickListener {
            val chaptersFragment = ChaptersFragment(selectedBook)
            chaptersFragment.setOnPageSelectedListener { page ->
                navigateToPage(page)
            }
            chaptersFragment.show(supportFragmentManager, "chaptersFragment")
        }
        shareAppButton.setOnClickListener { ButtonActions.shareApp(it) }

        // Gesture handling
        gestureDetector = GestureDetector(this, object : GestureDetector.SimpleOnGestureListener() {
            override fun onSingleTapConfirmed(e: MotionEvent): Boolean {
                Log.d("DEBUG_MENU", "🚀 Tap detected! Toggling title visibility.")
                if (titleOverlay.visibility == View.VISIBLE) {
                    hideTitle()
                } else {
                    showTitleForLimitedTime()
                }
                toggleVisibility()
                return true
            }
        })

        viewPager.setOnTouchListener { _, event ->
            Log.d("DEBUG_MENU", "🔥 Touch detected: action = ${event.action}")
            gestureDetector.onTouchEvent(event)
            true
        }






        // Page change listener
        viewPager.registerOnPageChangeCallback(object : ViewPager2.OnPageChangeCallback() {
            override fun onPageSelected(position: Int) {
                super.onPageSelected(position)
                if (titleText.visibility == View.VISIBLE) {
                    updateTitle(position + 1)
                }
                titleMap[position + 1]?.let { title ->
                    if (!(title.contains("حزب") && (title.contains("نصف") || title.endsWith("-   ")))) {
                        hidePageInfoBanner()
                    } else {
                        showPageInfoBanner(title)
                    }
                }
            }
        })

        window.decorView.setOnSystemUiVisibilityChangeListener { visibility ->
            if ((visibility and View.SYSTEM_UI_FLAG_FULLSCREEN) == 0) {
                closeButton.visibility = View.VISIBLE
                homeButton.visibility = View.VISIBLE
            }
        }

        // ADDED START: Call to show welcome message
        showWelcomeMessageIfNeeded()
    // ADDED END

        //END of oncreate
    }

    // Load titles from titles.json
    private fun loadTitles(selectedBook: String) {
        try {
            val inputStream = assets.open(bookConfig.titlesFile)
            val jsonString = inputStream.bufferedReader().use { it.readText() }
            val jsonObject = JSONObject(jsonString)
            titleMap.clear()
            for (key in jsonObject.keys()) {
                val pageNumber = key.toInt()
                val title = jsonObject.getString(key)
                titleMap[pageNumber] = title
                Log.d("DEBUG_TITLE_MAP", "✅ Loaded title: Page $pageNumber -> $title")
            }
        } catch (e: Exception) {
            Log.e("DEBUG_TITLE_MAP", "❌ Error loading titles: ${e.message}")
        }
    }
    // ADDED START: Updated function with delay
    private fun showWelcomeMessageIfNeeded() {
        val launchCount = sharedPreferences.getInt("launchCount", 0)
        val dontShowAgain = sharedPreferences.getBoolean("dontShowWelcome", false)

        if (!dontShowAgain && launchCount < 2) {
            Handler(Looper.getMainLooper()).postDelayed({
                val dialogView = LayoutInflater.from(this).inflate(R.layout.dialog_welcome, null)
                val learnAboutButton = dialogView.findViewById<Button>(R.id.learnAboutButton)
                val dontShowCheckBox = dialogView.findViewById<CheckBox>(R.id.dontShowCheckBox)
                val okButton = dialogView.findViewById<Button>(R.id.okButton)

                learnAboutButton.setOnClickListener {
                    val intent = Intent(this, AboutActivity::class.java)
                    startActivity(intent)
                }

                val dialog = AlertDialog.Builder(this)
                    .setView(dialogView)
                    .setCancelable(false)
                    .create()

                okButton.setOnClickListener {
                    if (dontShowCheckBox.isChecked) {
                        sharedPreferences.edit().putBoolean("dontShowWelcome", true).apply()
                    }
                    dialog.dismiss()
                }

                dialog.show()

                sharedPreferences.edit().putInt("launchCount", launchCount + 1).apply()
            }, 3000) // 3000 milliseconds = 3 seconds
        }
    }
// ADDED END

    // Update title based on page number
    private fun updateTitle(pageNumber: Int) {
        Log.d("DEBUG_TITLE", "🔍 Checking title for page: $pageNumber")
        if (titleText.visibility == View.VISIBLE) {
            titleMap[pageNumber]?.let { title ->
                Log.d("DEBUG_TITLE", "✅ Found title: $title")
                titleText.text = title
                titleOverlay.visibility = View.VISIBLE
                titleText.visibility = View.VISIBLE
                titleOverlay.removeCallbacks(hideTitleRunnable)
                titleText.removeCallbacks(hideTitleRunnable)
                titleText.setOnClickListener { showTitleForLimitedTime() }
                if (title.contains("حزب") && (title.contains("نصف") || title.endsWith("-   "))) {
                    showPageInfoBanner(title)
                }
            } ?: Log.e("DEBUG_TITLE", "❌ No title found for page: $pageNumber")
        } else {
            Log.d("DEBUG_TITLE", "⚠️ Title text is not visible for page: $pageNumber")
        }
    }

    // Adjust banner position
    private fun adjustBannerPosition() {
        val screenHeight = resources.displayMetrics.heightPixels
        val newMarginTop = (screenHeight * 0.6).toInt() // 60% from top
        val layoutParams = pageInfoBanner.layoutParams as FrameLayout.LayoutParams
        layoutParams.topMargin = newMarginTop
        pageInfoBanner.layoutParams = layoutParams
    }

    // Show page info banner
    private fun showPageInfoBanner(title: String) {
        Log.e("DEBUG_BANNER", "Showing Hizb Banner: $title")
        pageInfoText.text = title
        pageInfoBanner.visibility = View.VISIBLE
        pageInfoBanner.removeCallbacks(hideBannerRunnable)
        pageInfoBanner.postDelayed(hideBannerRunnable, 1000)
    }

    // Hide page info banner
    private fun hidePageInfoBanner() {
        if (!::pageInfoBanner.isInitialized) return
        Log.e("DEBUG_BANNER", "Hiding Hizb Banner")
        pageInfoBanner.visibility = View.GONE
        pageInfoBanner.removeCallbacks(hideBannerRunnable)
    }

    override fun onResume() {
        super.onResume()
        adapter.notifyDataSetChanged() // Force refresh when reopening the app
    }

    override fun onNewIntent(intent: Intent?) {
        super.onNewIntent(intent)
        val newSelectedBook = intent?.getStringExtra("selectedBook")
        if (newSelectedBook != null && newSelectedBook != selectedBook) {
            selectedBook = newSelectedBook
            // Reload the book configuration and images
            bookConfig = BookConfig.loadFromAssets(this, selectedBook) ?: run {
                Toast.makeText(this, "Error loading book configuration", Toast.LENGTH_SHORT).show()
                finish()
                return
            }
            imageList.clear()
            imageList.addAll((1..bookConfig.totalPages).map { "${bookConfig.assetsPath.trimEnd('/')}/page$it.jpg" })
            adapter = ImageAdapter(this, imageList)
            adapter.isNightMode = isNightMode
            viewPager.adapter = adapter
            // Optionally, reset other states such as titles or saved pages
            loadTitles(selectedBook)
            loadSavedPages()
        }
    }

    override fun onConfigurationChanged(newConfig: Configuration) {
        super.onConfigurationChanged(newConfig)
        val currentPage = viewPager.currentItem
        viewPager.adapter = null
        viewPager.adapter = adapter
        viewPager.setCurrentItem(currentPage, false)
    }

    private fun getCurrentPage(): Int {
        return viewPager.currentItem
    }

    private fun navigateToPage(page: String) {
        val pageNumber = page.toIntOrNull() ?: return
        if (!::bookConfig.isInitialized) {
            Toast.makeText(this, "Book configuration not loaded!", Toast.LENGTH_SHORT).show()
            return
        }
        if (pageNumber in 1..bookConfig.totalPages) {
            viewPager.setCurrentItem(pageNumber - 1, true)
        } else {
            Toast.makeText(this, "Invalid page number: $pageNumber", Toast.LENGTH_SHORT).show()
        }
    }

    private fun saveCurrentPage() {
        val currentPage = getCurrentPage()
        if (!savedPages.contains(currentPage)) {
            savedPages.add(currentPage)
            savePages()
            Toast.makeText(this, "Page ${currentPage + 1} enregistrée", Toast.LENGTH_SHORT).show()
        } else {
            Toast.makeText(this, "Page déjà enregistrée", Toast.LENGTH_SHORT).show()
        }
    }

    private fun showSavedPagesDialog() {
        if (savedPages.isEmpty()) {
            Toast.makeText(this, "Aucune page enregistrée", Toast.LENGTH_SHORT).show()
            return
        }
        SavedPagesDialog(savedPages.toMutableList(), ::removeSavedPage) { page ->
            viewPager.currentItem = page
        }.show(supportFragmentManager, "SavedPagesDialog")
    }

    private fun removeSavedPage(page: Int) {
        savedPages.remove(page)
        savePages()
    }


    private fun savePages() {
        // Use a unique key for each book – for example, "savedPages_quran", "savedPages_Douaa", etc.
        sharedPreferences.edit().putString("savedPages_$selectedBook", savedPages.joinToString(",")).apply()
    }

    private fun loadSavedPages() {
        sharedPreferences.getString("savedPages_$selectedBook", "")?.let {
            savedPages.clear()
            savedPages.addAll(it.split(",").mapNotNull { it.toIntOrNull() })
        }
    }

    override fun dispatchTouchEvent(event: MotionEvent): Boolean {
        Log.e("DEBUG_MENU", "📱 Touch event detected: action=${event.action}")
        gestureDetector.onTouchEvent(event)
        return super.dispatchTouchEvent(event)
    }

    private fun toggleVisibility() {
        Log.e("DEBUG_MENU", "🔥 toggleVisibility() called!")
        val isCurrentlyVisible = menuLayout.visibility == View.VISIBLE
        Log.e("DEBUG_MENU", "Before toggle: menuLayout=${menuLayout.visibility}")
        closeButton.visibility = if (isCurrentlyVisible) View.GONE else View.VISIBLE
        homeButton.visibility = if (isCurrentlyVisible) View.GONE else View.VISIBLE
        menuLayout.visibility = if (isCurrentlyVisible) View.GONE else View.VISIBLE
        titleOverlay?.visibility = if (isCurrentlyVisible) View.GONE else View.VISIBLE
        titleText?.visibility = if (isCurrentlyVisible) View.GONE else View.VISIBLE
        Log.e("DEBUG_Title_MENU", "After toggle: menuLayout=${menuLayout.visibility}")
    }

    private fun configureViewPagerOrientation(isHorizontal: Boolean) {
        if (resources.configuration.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            viewPager.orientation = ViewPager2.ORIENTATION_VERTICAL
        } else {
            viewPager.orientation = if (isHorizontal) ViewPager2.ORIENTATION_HORIZONTAL else ViewPager2.ORIENTATION_VERTICAL
        }
        val isRightToLeft = sharedPreferences.getBoolean("ScrollDirection", true)
        viewPager.layoutDirection = if (isRightToLeft) View.LAYOUT_DIRECTION_RTL else View.LAYOUT_DIRECTION_LTR
    }

    override fun onNightModeChanged(isEnabled: Boolean) {
        isNightMode = isEnabled
        adapter.isNightMode = isNightMode
        adapter.notifyDataSetChanged()
        sharedPreferences.edit().putBoolean("NightMode", isNightMode).apply()
    }

    override fun onScrollDirectionChanged(isRightToLeft: Boolean) {
        configureViewPagerOrientation(sharedPreferences.getBoolean("ScrollOrientation", true))
    }

    override fun onScrollOrientationChanged(isHorizontal: Boolean) {
        configureViewPagerOrientation(isHorizontal)
    }

    override fun onFullscreenModeChanged(isEnabled: Boolean) {
        if (isEnabled) {
            window.decorView.systemUiVisibility = (
                    View.SYSTEM_UI_FLAG_FULLSCREEN or
                            View.SYSTEM_UI_FLAG_HIDE_NAVIGATION or
                            View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                    )
        } else {
            window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_VISIBLE
        }
    }

    override fun onKeepScreenOnChanged(isEnabled: Boolean) {
        if (isEnabled) {
            window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        } else {
            window.clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
        }
    }

    private fun hideTitle() {
        titleOverlay.visibility = View.GONE
        titleText.visibility = View.GONE
        titleOverlay.removeCallbacks(hideTitleRunnable)
        titleText.removeCallbacks(hideTitleRunnable)
    }

    private fun showTitleForLimitedTime() {
        titleOverlay.visibility = View.VISIBLE
        titleText.visibility = View.VISIBLE
        titleOverlay.removeCallbacks(hideTitleRunnable)
        titleText.removeCallbacks(hideTitleRunnable)
        titleOverlay.postDelayed(hideTitleRunnable, 2000)
        titleText.postDelayed(hideTitleRunnable, 2000)
    }
}

Fichier: app/src/main\java\com\education\Quran8\SavedPagesAdapter.kt
package com.education.Quran8

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Button
import android.widget.TextView
import androidx.recyclerview.widget.RecyclerView

class SavedPagesAdapter(
    private val savedPages: MutableList<Int>,
    private val onPageSelected: (Int) -> Unit,
    private val onRemovePage: (Int) -> Unit
) : RecyclerView.Adapter<SavedPagesAdapter.SavedPageViewHolder>() {

    class SavedPageViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val pageText: TextView = view.findViewById(R.id.pageNumber)
        val removeButton: Button = view.findViewById(R.id.removePageButton)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): SavedPageViewHolder {
        val view = LayoutInflater.from(parent.context).inflate(R.layout.item_saved_page, parent, false)
        return SavedPageViewHolder(view)
    }

    override fun onBindViewHolder(holder: SavedPageViewHolder, position: Int) {
        val page = savedPages[position]

        holder.pageText.text = "Page $page"
        holder.pageText.setOnClickListener {
            onPageSelected(page)
        }

        holder.removeButton.setOnClickListener {
            onRemovePage(page)
            savedPages.removeAt(position)
            notifyItemRemoved(position)
            notifyItemRangeChanged(position, savedPages.size)
        }
    }

    override fun getItemCount(): Int = savedPages.size
}

Fichier: app/src/main\java\com\education\Quran8\SavedPagesDialog.kt
package com.education.Quran8

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Button
import android.widget.Toast
import androidx.fragment.app.DialogFragment
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView

class SavedPagesDialog(
    private val savedPages: MutableList<Int>,
    private val onRemovePage: (Int) -> Unit,
    private val onPageSelected: (Int) -> Unit
) : DialogFragment() {

    private lateinit var adapter: SavedPagesAdapter

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View? {
        val view = inflater.inflate(R.layout.dialog_saved_pages, container, false)
        val recyclerView: RecyclerView = view.findViewById(R.id.recyclerViewPages)
        val closeButton: Button = view.findViewById(R.id.closeButton)

        // Initialize Adapter
        adapter = SavedPagesAdapter(savedPages, onPageSelected, onRemovePage)
        recyclerView.layoutManager = LinearLayoutManager(requireContext())
        recyclerView.adapter = adapter

        if (savedPages.isEmpty()) {
            Toast.makeText(requireContext(), "Aucune page enregistrée", Toast.LENGTH_SHORT).show()
            dismiss()
        }

        closeButton.setOnClickListener { dismiss() }
        return view
    }
}

Fichier: app/src/main\java\com\education\Quran8\SettingsFragment.kt
package com.education.Quran8

import android.content.Context
import android.content.SharedPreferences
import android.os.Bundle
import android.util.Log
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.Button
import android.widget.Switch
import androidx.appcompat.app.AppCompatDelegate
import androidx.fragment.app.DialogFragment

class SettingsFragment : DialogFragment() {

    private lateinit var sharedPreferences: SharedPreferences
    private lateinit var nightModeSwitch: Switch
    private lateinit var scrollDirectionSwitch: Switch
    private lateinit var scrollOrientationSwitch: Switch
    private lateinit var fullscreenSwitch: Switch
    private lateinit var keepScreenOnSwitch: Switch // Added for Keep Screen On
    private lateinit var resetButton: Button
    private var listener: SettingsChangeListener? = null

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?
    ): View? {
        val view = inflater.inflate(R.layout.fragment_settings, container, false)

        // Initialize SharedPreferences
        sharedPreferences = requireActivity().getSharedPreferences("AppSettings", Context.MODE_PRIVATE)

        // Initialize Views
        nightModeSwitch = view.findViewById(R.id.nightModeSwitch)
        //scrollDirectionSwitch = view.findViewById(R.id.scrollDirectionSwitch)
        scrollOrientationSwitch = view.findViewById(R.id.scrollOrientationSwitch)
        fullscreenSwitch = view.findViewById(R.id.fullscreenSwitch)
        keepScreenOnSwitch = view.findViewById(R.id.keepScreenOnSwitch) // Initialize Keep Screen On switch
        val closeButton: Button = view.findViewById(R.id.closeButton)
        resetButton = view.findViewById(R.id.resetButton)

        // Load Saved Preferences
        val isNightMode = sharedPreferences.getBoolean("NightMode", false)
        val isRightToLeft = sharedPreferences.getBoolean("ScrollDirection", true) // Default: Right-to-Left
        val isHorizontal = sharedPreferences.getBoolean("ScrollOrientation", true) // Default: Horizontal
        val isFullscreen = sharedPreferences.getBoolean("FullscreenMode", false) // Default: Not fullscreen
        val isKeepScreenOn = sharedPreferences.getBoolean("KeepScreenOn", true) // Default: Enabled

        // Set Initial States
        nightModeSwitch.isChecked = isNightMode
        //scrollDirectionSwitch.isChecked = isRightToLeft
        scrollOrientationSwitch.isChecked = isHorizontal
        fullscreenSwitch.isChecked = isFullscreen
        keepScreenOnSwitch.isChecked = isKeepScreenOn // Set initial state for Keep Screen On switch

        // Night Mode Listener
        nightModeSwitch.setOnCheckedChangeListener { _, isChecked ->
            setNightMode(isChecked)
            sharedPreferences.edit().putBoolean("NightMode", isChecked).apply()
            listener?.onNightModeChanged(isChecked)
        }

        // Scroll Direction Listener
       // scrollDirectionSwitch.setOnCheckedChangeListener { _, isChecked ->
       //     sharedPreferences.edit().putBoolean("ScrollDirection", isChecked).apply()
        //    listener?.onScrollDirectionChanged(isChecked)
       // }

        // Scroll Orientation Listener
        scrollOrientationSwitch.setOnCheckedChangeListener { _, isChecked ->
            sharedPreferences.edit().putBoolean("ScrollOrientation", isChecked).apply()
            listener?.onScrollOrientationChanged(isChecked)
        }

        // Fullscreen Mode Listener
        fullscreenSwitch.setOnCheckedChangeListener { _, isChecked ->
            sharedPreferences.edit().putBoolean("FullscreenMode", isChecked).apply()
            listener?.onFullscreenModeChanged(isChecked)
        }

        // Keep Screen On Listener
        keepScreenOnSwitch.setOnCheckedChangeListener { _, isChecked ->
            sharedPreferences.edit().putBoolean("KeepScreenOn", isChecked).apply()
            listener?.onKeepScreenOnChanged(isChecked)
        }

        // Close Button
        closeButton.setOnClickListener { dismiss() }

        // Reset Button
        resetButton.setOnClickListener {
            resetSettings()
        }

        return view
    }

    private fun setNightMode(enabled: Boolean) {
        val sharedPreferences = requireActivity().getSharedPreferences("AppSettings", Context.MODE_PRIVATE)
        val currentMode = sharedPreferences.getBoolean("NightMode", false)

        Log.e("DEBUG_APP_Night", "🔄 Changing Night Mode: Current=$currentMode, New=$enabled")

        // ✅ Prevent reapplying the same mode
        if (enabled == currentMode) {
            Log.e("DEBUG_APP_Night", "⚠️ Night mode is already set. No change needed.")
            return  // 🚀 STOP HERE! No restart needed.
        }

        // ✅ Save the new mode BEFORE changing UI
        sharedPreferences.edit().putBoolean("NightMode", enabled).apply()

        // ✅ Apply mode correctly
        AppCompatDelegate.setDefaultNightMode(
            if (enabled) AppCompatDelegate.MODE_NIGHT_YES
            else AppCompatDelegate.MODE_NIGHT_NO
        )

        Log.e("DEBUG_APP_Night", "✅ Night mode changed! Restarting activity...")

        // ✅ Restart activity but prevent double toggling
        requireActivity().finish()
        requireActivity().overridePendingTransition(0, 0) // 🔥 Prevent flickering
        requireActivity().startActivity(requireActivity().intent)
    }





    private fun resetSettings() {
        sharedPreferences.edit()
            .putBoolean("NightMode", false) // Reset Night Mode
            .putBoolean("ScrollDirection", true) // Reset to Right-to-Left
            .putBoolean("ScrollOrientation", true) // Reset to Horizontal
            .putBoolean("FullscreenMode", false) // Reset Fullscreen Mode
            .putBoolean("KeepScreenOn", true) // Reset Keep Screen On
            .apply()

        // Update UI
        nightModeSwitch.isChecked = false
       // scrollDirectionSwitch.isChecked = true
        scrollOrientationSwitch.isChecked = true
        fullscreenSwitch.isChecked = false
        keepScreenOnSwitch.isChecked = true // Reset Keep Screen On switch

        // Notify listeners
        setNightMode(false)
        listener?.onNightModeChanged(false)
        listener?.onScrollDirectionChanged(true)
        listener?.onScrollOrientationChanged(true)
        listener?.onFullscreenModeChanged(false)
        listener?.onKeepScreenOnChanged(true) // Notify Keep Screen On change
    }

    override fun onAttach(context: Context) {
        super.onAttach(context)
        if (context is SettingsChangeListener) {
            listener = context
        }
    }

    override fun onDetach() {
        super.onDetach()
        listener = null
    }

    interface SettingsChangeListener {
        fun onNightModeChanged(isEnabled: Boolean)
        fun onScrollDirectionChanged(isRightToLeft: Boolean)
        fun onScrollOrientationChanged(isHorizontal: Boolean)
        fun onFullscreenModeChanged(isFullscreen: Boolean)
        fun onKeepScreenOnChanged(isEnabled: Boolean) // Added for Keep Screen On
    }
}

Fichier: app/src/main\java\com\education\Quran8\Subcategory_Adapter.kt
package com.education.Quran8



import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.recyclerview.widget.RecyclerView
// ✅ Import de la classe Subcategory depuis

class SubcategoryAdapter(
    private val subcategories: List<Subcategory>,  // ✅ Assurez-vous que c'est bien List<Subcategory>
    private val onItemSelected: (Subcategory) -> Unit  // ✅ Accepte un Subcategory complet
) : RecyclerView.Adapter<SubcategoryAdapter.SubcategoryViewHolder>() {

    inner class SubcategoryViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val subcategoryText: TextView = view.findViewById(R.id.subcategoryText)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): SubcategoryViewHolder {
        val view = LayoutInflater.from(parent.context).inflate(R.layout.item_subcategory, parent, false)
        return SubcategoryViewHolder(view)
    }

    override fun onBindViewHolder(holder: SubcategoryViewHolder, position: Int) {
        val subcategory = subcategories[position]
        holder.subcategoryText.text = subcategory.name
        holder.subcategoryText.setOnClickListener {
            onItemSelected(subcategory)
        }
    }

    override fun getItemCount(): Int = subcategories.size
}

Fichier: app/src/main\java\com\education\Quran8\WebViewActivity.kt
package com.education.Quran8

import android.os.Bundle
import android.webkit.WebView
import android.widget.Button
import androidx.appcompat.app.AppCompatActivity

class WebViewActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_webview)

        val webView = findViewById<WebView>(R.id.webView)
        val closeButton = findViewById<Button>(R.id.closeButton)

        val htmlFile = intent.getStringExtra("htmlFile") ?: "how_to_create.html"
        webView.settings.javaScriptEnabled = true
        webView.loadUrl("file:///android_asset/$htmlFile")


        closeButton.setOnClickListener { finish() }
    }
}
Fichier: app/src/main\java\com\education\Quran8\ZoomableImageView.kt
package com.education.Quran8

import android.content.Context
import android.graphics.Matrix
import android.graphics.drawable.Drawable
import android.util.AttributeSet
import android.view.MotionEvent
import android.view.ScaleGestureDetector
import androidx.appcompat.widget.AppCompatImageView
import kotlin.math.max
import kotlin.math.min

class ZoomableImageView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null
) : AppCompatImageView(context, attrs) {

    private val scaleDetector: ScaleGestureDetector
    private val matrix = Matrix()
    private var scaleFactor = 1f
    private var mode = NONE

    private var lastTouchX = 0f
    private var lastTouchY = 0f
    private var activePointerId = -1

    private var isPortraitMode = true

    companion object {
        private const val NONE = 0
        private const val DRAG = 1
        private const val ZOOM = 2
    }

    init {
        scaleType = ScaleType.MATRIX
        scaleDetector = ScaleGestureDetector(context, ScaleListener())
    }

    override fun onTouchEvent(event: MotionEvent): Boolean {
        scaleDetector.onTouchEvent(event)

        when (event.action and MotionEvent.ACTION_MASK) {
            MotionEvent.ACTION_DOWN -> {
                mode = DRAG
                lastTouchX = event.x
                lastTouchY = event.y
            }
            MotionEvent.ACTION_POINTER_DOWN -> {
                mode = ZOOM
            }
            MotionEvent.ACTION_MOVE -> {
                if (mode == DRAG) {
                    val dx = event.x - lastTouchX
                    val dy = event.y - lastTouchY
                    matrix.postTranslate(dx, dy)
                    lastTouchX = event.x
                    lastTouchY = event.y
                    setImageMatrix(matrix)
                }
            }
            MotionEvent.ACTION_UP, MotionEvent.ACTION_POINTER_UP -> {
                mode = NONE
            }
        }
        return true
    }

    private inner class ScaleListener : ScaleGestureDetector.SimpleOnScaleGestureListener() {
        override fun onScale(detector: ScaleGestureDetector): Boolean {
            scaleFactor *= detector.scaleFactor
            scaleFactor = max(1f, min(scaleFactor, 3f)) // Limit zoom between 1x and 3x

            // Restrict scaling based on orientation
            if (isPortraitMode) {
                scaleFactor = min(scaleFactor, height.toFloat() / drawable.intrinsicHeight)
            } else {
                scaleFactor = min(scaleFactor, width.toFloat() / drawable.intrinsicWidth)
            }

            matrix.setScale(scaleFactor, scaleFactor, detector.focusX, detector.focusY)
            setImageMatrix(matrix)
            return true
        }
    }

    override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) {
        super.onSizeChanged(w, h, oldw, oldh)
        isPortraitMode = w < h // Determine orientation based on width and height
    }

    override fun setImageDrawable(drawable: Drawable?) {
        super.setImageDrawable(drawable)
        resetZoom()
    }

    private fun resetZoom() {
        matrix.reset()
        scaleFactor = 1f
        setImageMatrix(matrix)
    }
}

Fichier: app/src/main\res\drawable\close_button_background.xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">

    <solid android:color="@android:color/transparent"/>
    <stroke
        android:width="2dp"
        android:color="@android:color/darker_gray"/>
    <size
        android:width="50dp"
        android:height="50dp"/>
    <corners android:radius="25dp"/>
</shape>

Fichier: app/src/main\res\drawable\dark_semi_transparent_background.xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#80000000" /> <!-- Dark gray with 50% opacity (80 in hex = 50%) -->
    <corners android:radius="8dp" /> <!-- Optional: rounded corners -->
</shape>
Fichier: app/src/main\res\drawable\dialog_background.xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="#99000000"/> <!-- Semi-transparent black -->
    <corners android:radius="16dp"/>
</shape>

Fichier: app/src/main\res\drawable\error_image.xml
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FF0000" />
    <corners android:radius="8dp" />
</shape>

Fichier: app/src/main\res\drawable\ic_home1.xml
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#808080"
        android:pathData="M13,3L6,10h2v8h4v-5h2v5h4v-8h2L13,3z"/>
</vector>

Fichier: app/src/main\res\drawable\ic_launcher_background.xml
<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path
        android:fillColor="#3DDC84"
        android:pathData="M0,0h108v108h-108z" />
    <path
        android:fillColor="#00000000"
        android:pathData="M9,0L9,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,0L19,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M29,0L29,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M39,0L39,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M49,0L49,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M59,0L59,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M69,0L69,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M79,0L79,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M89,0L89,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M99,0L99,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,9L108,9"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,19L108,19"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,29L108,29"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,39L108,39"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,49L108,49"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,59L108,59"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,69L108,69"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,79L108,79"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,89L108,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,99L108,99"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,29L89,29"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,39L89,39"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,49L89,49"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,59L89,59"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,69L89,69"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,79L89,79"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M29,19L29,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M39,19L39,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M49,19L49,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M59,19L59,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M69,19L69,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M79,19L79,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
</vector>

Fichier: app/src/main\res\drawable\ic_launcher_foreground.xml
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path android:pathData="M31,63.928c0,0 6.4,-11 12.1,-13.1c7.2,-2.6 26,-1.4 26,-1.4l38.1,38.1L107,108.928l-32,-1L31,63.928z">
        <aapt:attr name="android:fillColor">
            <gradient
                android:endX="85.84757"
                android:endY="92.4963"
                android:startX="42.9492"
                android:startY="49.59793"
                android:type="linear">
                <item
                    android:color="#44000000"
                    android:offset="0.0" />
                <item
                    android:color="#00000000"
                    android:offset="1.0" />
            </gradient>
        </aapt:attr>
    </path>
    <path
        android:fillColor="#FFFFFF"
        android:fillType="nonZero"
        android:pathData="M65.3,45.828l3.8,-6.6c0.2,-0.4 0.1,-0.9 -0.3,-1.1c-0.4,-0.2 -0.9,-0.1 -1.1,0.3l-3.9,6.7c-6.3,-2.8 -13.4,-2.8 -19.7,0l-3.9,-6.7c-0.2,-0.4 -0.7,-0.5 -1.1,-0.3C38.8,38.328 38.7,38.828 38.9,39.228l3.8,6.6C36.2,49.428 31.7,56.028 31,63.928h46C76.3,56.028 71.8,49.428 65.3,45.828zM43.4,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2c-0.3,-0.7 -0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C45.3,56.528 44.5,57.328 43.4,57.328L43.4,57.328zM64.6,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2s-0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C66.5,56.528 65.6,57.328 64.6,57.328L64.6,57.328z"
        android:strokeWidth="1"
        android:strokeColor="#00000000" />
</vector>

Fichier: app/src/main\res\drawable\menu_background.xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <corners android:radius="20dp"/>
    <solid android:color="#CC000000"/> <!-- Semi-transparent background -->
    <padding android:left="16dp" android:top="8dp" android:right="16dp" android:bottom="8dp"/>
</shape>

Fichier: app/src/main\res\drawable\placeholder.xml
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#CCCCCC" />
    <corners android:radius="8dp" />
</shape>

Fichier: app/src/main\res\drawable\transparent_black_background.xml
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#80000000" /> <!-- Semi-transparent black -->
    <corners android:radius="16dp" />   <!-- Rounded corners -->
    <stroke android:width="1dp" android:color="#40FFFFFF" /> <!-- Optional: Light border -->
</shape>

Fichier: app/src/main\res\layout\activity_about.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp"
    android:background="#A27BA865"
    android:gravity="center">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/about_quran_reader"
        android:textSize="24sp"
        android:textStyle="bold"
        android:textColor="@android:color/black"
        android:gravity="center"
        android:paddingBottom="16dp"/>

    <Button
        android:id="@+id/howToUseButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/how_to_use"
        android:textSize="18sp"
        android:backgroundTint="#727820"
        android:textColor="@android:color/white"
        android:padding="12dp"
        android:layout_marginBottom="16dp"/>

    <Button
        android:id="@+id/createBookButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/create_book"
        android:textSize="18sp"
        android:backgroundTint="#A0A218"
        android:textColor="@android:color/white"
        android:padding="12dp"
        android:layout_marginBottom="16dp"/>

    <Button
        android:id="@+id/contactUsButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/contact_us"
        android:textSize="18sp"
        android:backgroundTint="#DBC91B"
        android:textColor="@android:color/black"
        android:padding="12dp"/>
</LinearLayout>

Fichier: app/src/main\res\layout\activity_form.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</LinearLayout>

Fichier: app/src/main\res\layout\activity_home.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#A27BA865"
    android:orientation="vertical">

    <!-- Close Button at Top Right -->
    <ImageView
        android:id="@+id/closeButton"
        android:layout_width="35dp"
        android:layout_height="35dp"
        android:layout_gravity="end|top"
        android:src="@drawable/ic_close"
        android:contentDescription="@string/close"
        android:padding="8dp"
        android:background="@drawable/close_button_background"
        android:visibility="visible" />

    <!-- Carousel Title -->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/library_title"
        android:textSize="24sp"
        android:textStyle="bold"
        android:textColor="@android:color/black"
        android:gravity="center"
        android:padding="8dp" />

    <!-- Carousel -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/bookCarousel"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" />

    <!-- About Quran Reader Link -->
    <Button
        android:id="@+id/aboutLink"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/about_quran_reader"
        android:textSize="18sp"
        android:textColor="@android:color/black"
        android:textStyle="bold"
        android:backgroundTint="#DBC91B"
        android:gravity="center"
        android:layout_marginBottom="16dp"
        android:layout_gravity="center" />




    <!-- Menu Layout -->
    <LinearLayout
        android:id="@+id/menuLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:visibility="visible"
        android:padding="8dp"
        android:background="@drawable/menu_background"
        android:elevation="8dp"
        android:layout_gravity="bottom">

        <ImageView
            android:id="@+id/manageBooksButton"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:src="@drawable/ic_book"
            android:contentDescription="@string/manage_books"
            android:scaleType="centerInside"
            android:padding="8dp"/>
    </LinearLayout>
</LinearLayout>

Fichier: app/src/main\res\layout\activity_main.xml
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- ViewPager2 for displaying pages -->
    <androidx.viewpager2.widget.ViewPager2
        android:id="@+id/viewPager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:scaleType="fitCenter"
        android:orientation="horizontal" />

    <!-- Title Overlay (Semi-Transparent) -->
    <FrameLayout
        android:id="@+id/titleOverlay"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#80000000"
        android:padding="8dp"
        android:visibility="visible"
        android:alpha="0.9"
        android:gravity="center">

        <TextView
            android:id="@+id/titleText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="22sp"
            android:textColor="@android:color/white"
            android:gravity="center"
            android:padding="16dp"/>
    </FrameLayout>

    <!-- Close Button (Top-Right) -->
    <ImageView
        android:id="@+id/closeButton"
        android:layout_width="35dp"
        android:layout_height="35dp"
        android:layout_gravity="end|top"
        android:src="@drawable/ic_close"
        android:contentDescription="Close App"
        android:padding="8dp"
        android:background="@drawable/close_button_background"
        android:visibility="gone" />

    <!-- Bottom Navigation Menu -->
    <LinearLayout
        android:id="@+id/menuLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:visibility="gone"
        android:padding="8dp"
        android:background="@drawable/menu_background"
        android:elevation="8dp"
        android:layout_gravity="bottom"
        android:weightSum="6">

        <ImageView
            android:id="@+id/openChapters"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_chapters"
            android:contentDescription="Open Chapters"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/savePage"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_save"
            android:contentDescription="Save Page"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/shareApp"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_share"
            android:contentDescription="Share App"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/openBookmark"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_bookmark"
            android:contentDescription="Open Bookmarks"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/openSettings"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_settings"
            android:contentDescription="Open Settings"
            android:scaleType="centerInside"
            android:padding="8dp"/>
        <!-- Home Button (Top-Left) -->
        <ImageView
            android:id="@+id/homeButton"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_home"
            android:scaleType="centerInside"
            android:contentDescription="Home Button"
            android:padding="8dp" />
    </LinearLayout>

    <!-- Page Info Banner (Appears for 4 seconds) -->
    <LinearLayout
        android:id="@+id/pageInfoBanner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="0dp"
        android:orientation="horizontal"
        android:padding="12dp"
        android:background="@drawable/transparent_black_background"
        android:elevation="8dp"
        android:visibility="gone"
        android:alpha="0.9">


    <ImageView
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:src="@drawable/ic_book"
            android:padding="4dp"/>

        <TextView
            android:id="@+id/pageInfoText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="20sp"
            android:textColor="@android:color/white"
            android:paddingStart="8dp"/>
    </LinearLayout>

</FrameLayout>

Fichier: app/src/main\res\layout\activity_webview.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <Button
        android:id="@+id/closeButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Close"
        android:textSize="16sp"
        android:backgroundTint="#757575"
        android:textColor="@android:color/white"
        android:padding="12dp"
        android:layout_gravity="center"
        android:layout_margin="16dp"/>
</LinearLayout>
Fichier: app/src/main\res\layout\dialog_book_name.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="16dp"
    android:background="@drawable/dialog_background">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Enter Book Name"
        android:textSize="18sp"
        android:textColor="@android:color/white"
        android:gravity="center"
        android:layout_marginBottom="8dp"/>

    <EditText
        android:id="@+id/bookNameEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Book Name"
        android:textColor="@android:color/white"
        android:textColorHint="@android:color/black"
        android:inputType="text"
        android:maxLength="50"/>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginTop="16dp"
        android:gravity="center">

        <Button
            android:id="@+id/confirmButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Confirm"
            android:layout_marginEnd="8dp"/>

        <Button
            android:id="@+id/cancelButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancel"/>
    </LinearLayout>
</LinearLayout>
Fichier: app/src/main\res\layout\dialog_manage_books.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_gravity="center">


    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="20dp"
        android:background="@drawable/dialog_background"
        android:gravity="center">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/manage_books"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textColor="@android:color/white"
            android:gravity="center"/>

        <Spinner
            android:id="@+id/bookSpinner"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:background="@android:drawable/edit_text"
            android:padding="8dp"
            android:textColor="@android:color/white"
            android:layout_marginBottom="16dp"/>

        <Button
            android:id="@+id/addBookButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/add_book"
            android:textColor="@android:color/white"
            android:backgroundTint="#65B331"
            android:padding="12dp"
            android:layout_marginBottom="12dp"/>

        <Button
            android:id="@+id/deleteBookButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/delete_book"
            android:textColor="@android:color/white"
            android:backgroundTint="#4CAF50"
            android:padding="12dp"
            android:layout_marginBottom="12dp"/>

        <Button
            android:id="@+id/selectDefaultBookButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/select_default_book"
            android:textColor="@android:color/white"
            android:backgroundTint="#197115"
            android:padding="12dp"
            android:layout_marginBottom="12dp"/>

        <Button
            android:id="@+id/closeButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/close"
            android:textColor="@android:color/white"
            android:backgroundTint="#757575"
            android:padding="12dp"/>
    </LinearLayout>
</LinearLayout>
Fichier: app/src/main\res\layout\dialog_menu.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/dialog_background"
    android:orientation="vertical"
    android:padding="8dp"
    android:layoutDirection="rtl"
    android:textDirection="rtl">

    <!-- Each menu item -->
    <LinearLayout
        android:id="@+id/menu_donate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">

        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/ic_zoom"
            android:color="@android:color/white"
            android:layout_marginStart="8dp"/>

        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="للتواصل معنا"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:textAlignment="viewStart"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray" />

    <!-- Repeat for each menu item -->
    <LinearLayout
        android:id="@+id/menu_tafsir"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">

        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/recherche"
            app:tint="@android:color/white"
            android:layout_marginStart="8dp"/>

        <TextView
            android:layout_width="0dp"
            android:layout_weight="2"
            android:layout_height="wrap_content"
            android:text="التفسير"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:textAlignment="viewStart"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"/>

    <LinearLayout
        android:id="@+id/menu_audio"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">

        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/ic_audio"
            android:layout_marginStart="8dp"/>

        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="Audio"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"/>

    <LinearLayout
        android:id="@+id/menu_download"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="?android:attr/selectableItemBackground"
        android:gravity="start|center_vertical"
        android:paddingVertical="12dp"
        android:paddingHorizontal="16dp">

        <ImageView
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@drawable/ic_download"
            android:layout_marginStart="8dp"/>

        <TextView
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="Download"
            android:textColor="@android:color/white"
            android:textSize="16sp"
            android:textStyle="bold"
            android:gravity="start"
            android:layout_marginStart="10dp"/>
    </LinearLayout>

</LinearLayout>

Fichier: app/src/main\res\layout\dialog_saved_pages.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="6dp"
    android:background="#FFF8E1">

    <!-- Titre -->
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="📖 Saved Pages"
        android:textSize="20sp"
        android:textStyle="bold"
        android:gravity="center"
        android:paddingBottom="10dp"
        android:textColor="@color/dark_primary_variant2" />

    <!-- Ligne de séparation -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_marginBottom="8dp"/>
    <Button
        android:id="@+id/closeButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Close"
        android:backgroundTint="#DBC91B"
        android:textColor="@android:color/black"
        android:layout_marginTop="8dp"/>

    <!-- Liste des pages enregistrées avec RecyclerView -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewPages"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:nestedScrollingEnabled="false"
        android:overScrollMode="never"/>

    <!-- Bouton Fermer -->

</LinearLayout>

Fichier: app/src/main\res\layout\dialog_welcome.xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    app:cardCornerRadius="16dp"
    app:cardBackgroundColor="#FFF8E1"
    app:cardElevation="4dp"
    android:layout_margin="16dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="20dp">

        <!-- Learn About Button -->
        <Button
            android:id="@+id/learnAboutButton"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Learn about Quran Reader"
            android:textSize="16sp"
            android:textColor="@android:color/white"
            android:backgroundTint="#4CAF50"
            android:padding="12dp"
            android:layout_marginBottom="20dp"
            android:stateListAnimator="@null"
            app:cornerRadius="12dp"
            style="@style/Widget.MaterialComponents.Button"/>

        <!-- Checkbox -->
        <CheckBox
            android:id="@+id/dontShowCheckBox"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Don't show this message again"
            android:textColor="#212121"
            android:textSize="14sp"
            android:layout_gravity="center"
            android:layout_marginBottom="20dp"
            android:paddingStart="8dp"
            android:buttonTint="#4CAF50"/>

        <!-- OK Button -->
        <Button
            android:id="@+id/okButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="OK"
            android:textSize="16sp"
            android:textColor="#212121"
            android:backgroundTint="#FFD700"
            android:padding="12dp"
            android:minWidth="100dp"
            android:layout_gravity="center"
            android:stateListAnimator="@null"
            app:cornerRadius="12dp"
            style="@style/Widget.MaterialComponents.Button"/>

    </LinearLayout>
</androidx.cardview.widget.CardView>
Fichier: app/src/main\res\layout\fragment_bookmark.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="#FFF8E1"
    android:padding="16dp">

    <Button
        android:id="@+id/closeButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:backgroundTint="#DBC91B"
        android:text="Close"/>
</LinearLayout>

Fichier: app/src/main\res\layout\fragment_chapters.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="#FFF8E1"
    android:padding="16dp">
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="⚙ Table of Contents"
        android:textSize="18sp"
        android:textStyle="bold"
        android:gravity="center"
        android:paddingBottom="3dp"
        android:textColor="@color/dark_primary_variant2" />
    <!-- Divider -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_marginBottom="3dp"/>
    <!-- Close Button -->
    <Button
        android:id="@+id/closeButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Close"
        android:backgroundTint="#DBC91B"
        android:textColor="@android:color/black"
        android:layout_marginTop="8dp"/>

    <!-- RecyclerView for Categories -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/chapterRecyclerView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:nestedScrollingEnabled="false"
        android:overScrollMode="never"/>


</LinearLayout>

Fichier: app/src/main\res\layout\fragment_settings.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="#FFF8E1"
    android:padding="16dp">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="⚙ Settings"
        android:textSize="18sp"
        android:textStyle="bold"
        android:gravity="center"
        android:paddingBottom="8dp"
        android:textColor="@android:color/black" />
    <!-- Divider -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_marginBottom="8dp"/>
    <Button
        android:id="@+id/closeButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:backgroundTint="#DBC91B"
        android:textColor="@android:color/black"
        android:layout_marginTop="8dp"
        android:text="❌ Close"/>

    <Button
        android:id="@+id/resetButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:backgroundTint="#DBC91B"
        android:textColor="@android:color/black"
        android:layout_marginTop="8dp"
        android:text="Reset" />
    <!-- Divider -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_marginBottom="8dp"/>

    <Switch
        android:id="@+id/nightModeSwitch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Night Mode"
        android:textSize="15sp"
        android:textStyle="bold"
        android:gravity="center"
        android:checked="false"/>
    <!-- Divider -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_marginBottom="8dp"/>

    <!-- Scroll Direction Switch -->


    <!-- Divider -->

    <!-- Scroll Orientation Switch -->
    <Switch
        android:id="@+id/scrollOrientationSwitch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Horizontal/vertical Scrolling"
        android:textSize="15sp"
        android:textStyle="bold"
        android:checked="true"/> <!-- Default: Horizontal -->

    <!-- Divider -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_marginBottom="8dp"/>

    <Switch
        android:id="@+id/fullscreenSwitch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Fullscreen Mode"
        android:checked="false" />

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"
        android:layout_marginBottom="8dp"/>
    <Switch
        android:id="@+id/keepScreenOnSwitch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Keep Screen On"
        android:checked="true" />



</LinearLayout>

Fichier: app/src/main\res\layout\item_book_carousel.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="8dp"
    android:gravity="center">

    <ImageView
        android:id="@+id/bookImage"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:scaleType="fitCenter"
        android:contentDescription="Book Cover"/>

    <TextView
        android:id="@+id/bookTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="16sp"
        android:textColor="@color/onPrimary"
        android:gravity="center"
        android:layout_marginTop="4dp"
        android:text="Book Title"/>
</LinearLayout>

Fichier: app/src/main\res\layout\item_category.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dp"
    android:background="#FFF8E1">

    <TextView
        android:id="@+id/categoryTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        android:textStyle="bold"
        android:padding="8dp"
        android:textColor="@android:color/black"/>

    <!-- RecyclerView for Subcategories -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewSubcategories"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="gone"
        android:nestedScrollingEnabled="false"
        android:overScrollMode="never"/>
</LinearLayout>

Fichier: app/src/main\res\layout\item_image.xml
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center">


    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:scaleType="fitXY" />
</FrameLayout>

Fichier: app/src/main\res\layout\item_image_portrait.xml
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="fitXY" />
</FrameLayout>

Fichier: app/src/main\res\layout\item_saved_page.xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="6dp"
    app:cardCornerRadius="8dp"
    app:cardElevation="4dp"
    android:background="@android:color/white">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="12dp"
        android:gravity="center_vertical"
        android:background="#FDF7C9">

        <!-- Page Number -->
        <TextView
            android:id="@+id/pageNumber"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:text="📖 Page Number"
            android:textSize="16sp"
            android:textColor="@android:color/black"
            android:clickable="true"
            android:foreground="?attr/selectableItemBackground"
            android:padding="8dp" />

        <!-- Remove Button -->
        <Button
            android:id="@+id/removePageButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="❌"
            android:backgroundTint="#DBC91B"
            android:textColor="@android:color/white"
            android:elevation="4dp"
            android:layout_marginStart="8dp"/>
    </LinearLayout>

</androidx.cardview.widget.CardView>

Fichier: app/src/main\res\layout\item_subcategory.xml
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/subcategoryText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="16sp"
    android:padding="10dp"
    android:textColor="@android:color/black"
    android:gravity="center"
    android:background="#FFF8E1"/>

Fichier: app/src/main\res\layout\page_layout.xml
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- ConstraintLayout to maintain image aspect ratio -->
    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- ImageView with dynamic height -->
        <ImageView
            android:id="@+id/imageView"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:scaleType="fitCenter"
            android:adjustViewBounds="true"
            app:layout_constraintDimensionRatio="H,16:9"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintWidth_default="spread" />
    </androidx.constraintlayout.widget.ConstraintLayout>
</ScrollView>

Fichier: app/src/main\res\layout-land\activity_main.xml
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/black">

    <!-- ViewPager2 for Quran pages -->
    <androidx.viewpager2.widget.ViewPager2
        android:id="@+id/viewPager"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"/>

    <!-- Semi-transparent title overlay -->
    <FrameLayout
        android:id="@+id/titleOverlay"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#80000000"
        android:padding="8dp"
        android:visibility="visible"
        android:alpha="0.9"
        android:gravity="center">

        <TextView
            android:id="@+id/titleText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="22sp"
            android:textColor="@android:color/white"
            android:gravity="center"
            android:padding="16dp"/>
    </FrameLayout>

    <!-- Close Button (Top-Right) -->
    <ImageView
        android:id="@+id/closeButton"
        android:layout_width="35dp"
        android:layout_height="35dp"
        android:layout_gravity="end|top"
        android:src="@drawable/ic_close"
        android:contentDescription="Close App"
        android:padding="8dp"
        android:background="@drawable/close_button_background"
        android:visibility="gone" />

        <!-- Bottom Navigation Menu -->
    <LinearLayout
        android:id="@+id/menuLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:visibility="gone"
        android:padding="8dp"
        android:background="@drawable/menu_background"
        android:elevation="8dp"
        android:layout_gravity="bottom"
        android:weightSum="6">

        <ImageView
            android:id="@+id/openChapters"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_chapters"
            android:contentDescription="Open Chapters"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/savePage"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_save"
            android:contentDescription="Save Page"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/shareApp"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_share"
            android:contentDescription="Share App"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/openBookmark"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_bookmark"
            android:contentDescription="Open Bookmarks"
            android:scaleType="centerInside"
            android:padding="8dp"/>

        <ImageView
            android:id="@+id/openSettings"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_settings"
            android:contentDescription="Open Settings"
            android:scaleType="centerInside"
            android:padding="8dp"/>
        <!-- Home Button (Top-Left) -->
        <ImageView
            android:id="@+id/homeButton"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="1"
            android:src="@drawable/ic_home"
            android:scaleType="centerInside"
            android:contentDescription="Home Button"
            android:padding="8dp" />
    </LinearLayout>

    <!-- Page Info Banner (Appears for 4 seconds) -->
    <LinearLayout
        android:id="@+id/pageInfoBanner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="0dp"
        android:orientation="horizontal"
        android:padding="12dp"
        android:background="@drawable/transparent_black_background"
        android:elevation="8dp"
        android:visibility="gone"
        android:alpha="0.9">

        <ImageView
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:src="@drawable/ic_book"
            android:padding="4dp"/>

        <TextView
            android:id="@+id/pageInfoText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="20sp"
            android:textColor="@android:color/white"
            android:paddingStart="8dp"/>
    </LinearLayout>

</FrameLayout>

Fichier: app/src/main\res\layout-land\item_image.xml
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center">

    <!-- Scrollable ImageView for better landscape handling -->
    <androidx.core.widget.NestedScrollView
        android:id="@+id/scrollView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"
        android:scrollbars="vertical">

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:scaleType="fitCenter"
            android:contentDescription="Quran Page" />
    </androidx.core.widget.NestedScrollView>

</FrameLayout>

Fichier: app/src/main\res\layout-land\item_image_landscape.xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    tools:ignore="MissingDefaultResource">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true" />
</androidx.core.widget.NestedScrollView>

Fichier: app/src/main\res\mipmap-anydpi-v26\ic_launcher.xml
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background" />
    <foreground android:drawable="@drawable/ic_launcher_foreground" />
    <monochrome android:drawable="@drawable/ic_launcher_foreground" />
</adaptive-icon>

Fichier: app/src/main\res\mipmap-anydpi-v26\ic_launcher_round.xml
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background" />
    <foreground android:drawable="@drawable/ic_launcher_foreground" />
    <monochrome android:drawable="@drawable/ic_launcher_foreground" />
</adaptive-icon>

Fichier: app/src/main\res\values\colors.xml
<resources>
    <color name="primary">#057368</color> <!-- Green dark Material -->
    <color name="primaryVariant">#3700B3</color>
    <color name="secondary">#03DAC5</color> <!-- Bleu-vert -->
    <color name="secondaryVariant">#018786</color>
    <color name="background">#121212</color> <!-- Mode sombre -->
    <color name="surface">#1E1E1E</color>
    <color name="error">#CF6679</color>
    <color name="onPrimary">#FFFFFF</color>
    <color name="onSecondary">#000000</color>
    <color name="onBackground">#FFFFFF</color>
    <color name="onSurface">#FFFFFF</color>
    <color name="dark_primary">#121212</color>
    <color name="dark_primary_variant">#1E1E1E</color>

        <!-- Dark theme colors -->
        <color name="dark_background">#121212</color>
        <color name="dark_status_bar">#1E1E1E</color>
        <color name="dark_navigation_bar">#1E1E1E</color>

        <!-- Other colors -->
        <color name="dark_primary2">#212121</color>
        <color name="dark_primary_variant2">#424242</color>


</resources>

Fichier: app/src/main\res\values\strings.xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">Quran Reader</string>
    <string name="about_quran_reader">About Quran Reader</string>
    <string name="add_book">Add Book from ZIP</string>
    <string name="arabic">Arabic</string>
    <string name="audio">Audio</string>
    <string name="book_added">Book added successfully</string>
    <string name="book_config_not_loaded">Failed to load book configuration</string>
    <string name="book_cover">Book Cover</string>
    <string name="book_deleted">Book deleted</string>
    <string name="book_exists">Book already exists</string>
    <string name="close">Close</string>
    <string name="close_app_message">Are you sure you want to close the app?</string>
    <string name="close_app_title">Close App</string>
    <string name="confirm_delete_message">Are you sure you want to delete this book?</string>
    <string name="confirm_deletion">Confirm Deletion</string>
    <string name="contact_us">Contact Us</string>
    <string name="create_book">Create a Book in Quran Reader App</string>
    <string name="default_book_set">Set as default book</string>
    <string name="delete_book">Delete Selected Book</string>
    <string name="download">Download</string>
    <string name="english">English</string>
    <string name="error_installing_book">Error installing book</string>
    <string name="error_loading_book">Error loading book</string>
    <string name="fullscreen_mode">Fullscreen Mode</string>
    <string name="home">Home</string>
    <string name="how_to_use">How to Use Quran Reader</string>
    <string name="index">Index</string>
    <string name="installing_book">Installing book...</string>
    <string name="invalid_page_number">Invalid page number</string>
    <string name="invalid_zip">Invalid ZIP file</string>
    <string name="keep_screen_on">Keep Screen On</string>
    <string name="language">Language</string>
    <string name="library_title">Books Library</string>
    <string name="manage_books">Manage Books</string>
    <string name="night_mode">Night Mode</string>
    <string name="no">No</string>
    <string name="no_saved_pages">No saved pages</string>
    <string name="page_already_saved">Page already saved</string>
    <string name="page_saved">Page saved</string>
    <string name="reset">Reset</string>
    <string name="save_page">Save Page</string>
    <string name="saved_pages">Saved Pages</string>
    <string name="scroll_direction">Scroll Direction</string>
    <string name="scroll_orientation">Horizontal Scrolling</string>
    <string name="select_default_book">Set as Default Book</string>
    <string name="settings">Settings</string>
    <string name="share_app">Share App</string>
    <string name="tafsir">Tafsir</string>
    <string name="yes">Yes</string>

</resources>
Fichier: app/src/main\res\values\themes.xml
<resources xmlns:tools="http://schemas.android.com/tools">
    <!-- Dark Non Transparent Theme -->
    <style name="Theme.DarkNonTransparent" parent="Theme.Material3.DayNight.NoActionBar">
        <!-- Set the window background to a dark color -->
        <item name="android:windowBackground">@color/dark_background</item>
        <!-- Set the status bar color to a dark shade -->
        <item name="android:statusBarColor">@color/dark_status_bar</item>
        <!-- Set the navigation bar color to a dark shade -->
        <item name="android:navigationBarColor">@color/dark_navigation_bar</item>

        <!-- Define dark primary colors -->
        <item name="colorPrimary">@color/dark_primary</item>
        <item name="colorPrimaryVariant">@color/dark_primary_variant</item>
        <item name="colorOnPrimary">@android:color/white</item>
        <!-- Ensure primary text is visible -->
        <item name="android:textColorPrimary">@android:color/white</item>
    </style>
</resources>

Fichier: app/src/main\res\values-ar\strings.xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">قارئ القرآن</string>
    <string name="manage_books">إدارة الكتب</string>
    <string name="add_book">إضافة كتاب من ZIP</string>
    <string name="delete_book">حذف الكتاب المحدد</string>
    <string name="select_default_book">إختيار ككتاب رئيسي</string>
    <string name="close">إغلاق</string>
    <string name="about_quran_reader">حول قارئ القرآن</string>
    <string name="how_to_use">كيفية استخدام قارئ القرآن</string>
    <string name="create_book">إنشاء كتاب في تطبيق قارئ القرآن</string>
    <string name="library_title">مكتبة الكتب</string>
    <string name="settings">الإعدادات</string>
    <string name="language">اللغة</string>
    <string name="arabic">العربية</string>
    <string name="english">الإنجليزية</string>
    <string name="night_mode">الوضع الليلي</string>
    <string name="scroll_direction">اتجاه التمرير</string>
    <string name="scroll_orientation">التمرير الأفقي</string>
    <string name="fullscreen_mode">وضع ملء الشاشة</string>
    <string name="keep_screen_on">إبقاء الشاشة مفتوحة</string>
    <string name="reset">إعادة تعيين</string>
    <string name="index">فهرس</string>
    <string name="saved_pages">الصفحات المحفوظة</string>
    <string name="no_saved_pages">لا توجد صفحات محفوظة</string>
    <string name="close_app_title">إغلاق التطبيق</string>
    <string name="close_app_message">هل أنت متأكد من أنك تريد إغلاق التطبيق؟</string>
    <string name="yes">نعم</string>
    <string name="no">لا</string>
    <string name="contact_us">للتواصل معنا</string>
    <string name="tafsir">التفسير</string>
    <string name="audio">صوت</string>
    <string name="download">تحميل</string>
    <string name="installing_book">جارٍ تثبيت الكتاب...</string>
    <string name="confirm_deletion">تأكيد الحذف</string>
    <string name="confirm_delete_message">هل أنت متأكد من حذف \'%s\'؟</string>
    <string name="book_deleted">تم حذف الكتاب \'%s\'</string>
    <string name="default_book_set">تم تعيين \'%s\' ككتاب افتراضي</string>
    <string name="book_exists">الكتاب \'%s\' موجود بالفعل</string>
    <string name="book_added">تم إضافة الكتاب \'%s\'</string>
    <string name="invalid_zip">ملف ZIP غير صالح: مفقود config.json أو pages/</string>
    <string name="error_installing_book">خطأ أثناء تثبيت الكتاب: %s</string>
    <string name="error_loading_book">خطأ في تحميل تكوين الكتاب</string>
    <string name="book_config_not_loaded">لم يتم تحميل تكوين الكتاب!</string>
    <string name="invalid_page_number">رقم صفحة غير صالح: %d</string>
    <string name="page_saved">تم حفظ الصفحة %d</string>
    <string name="page_already_saved">الصفحة محفوظة بالفعل</string>
    <string name="home">الرئيسية</string> <!-- Added -->
    <string name="save_page">حفظ الصفحة</string>
    <string name="share_app">مشاركة التطبيق</string>
    <string name="book_cover">غلاف الكتاب</string>
</resources>
Fichier: app/src/main\res\values-night\themes.xml
<resources xmlns:tools="http://schemas.android.com/tools">
    <!-- Base application theme. -->
    <style name="Base.Theme.Quran_Athman_Reader" parent="Theme.Material3.DayNight.NoActionBar">
        <!-- Customize your dark theme here. -->
        <!-- <item name="colorPrimary">@color/my_dark_primary</item> -->
    </style>
</resources>

Fichier: app/src/main\res\xml\backup_rules.xml
<?xml version="1.0" encoding="utf-8"?><!--
   Sample backup rules file; uncomment and customize as necessary.
   See https://developer.android.com/guide/topics/data/autobackup
   for details.
   Note: This file is ignored for devices older that API 31
   See https://developer.android.com/about/versions/12/backup-restore
-->
<full-backup-content>
    <!--
   <include domain="sharedpref" path="."/>
   <exclude domain="sharedpref" path="device.xml"/>
-->
</full-backup-content>

Fichier: app/src/main\res\xml\data_extraction_rules.xml
<?xml version="1.0" encoding="utf-8"?><!--
   Sample data extraction rules file; uncomment and customize as necessary.
   See https://developer.android.com/about/versions/12/backup-restore#xml-changes
   for details.
-->
<data-extraction-rules>
    <cloud-backup>
        <!-- TODO: Use <include> and <exclude> to control what is backed up.
        <include .../>
        <exclude .../>
        -->
    </cloud-backup>
    <!--
    <device-transfer>
        <include .../>
        <exclude .../>
    </device-transfer>
    -->
</data-extraction-rules>

Fichier: app/src/test\java\com\education\Quran8\ExampleUnitTest.kt
package com.education.Quran8

import org.junit.Test

import org.junit.Assert.*

/**
 * Example local unit test, which will execute on the development machine (host).
 *
 * See [testing documentation](http://d.android.com/tools/testing).
 */
class ExampleUnitTest {
    @Test
    fun addition_isCorrect() {
        assertEquals(4, 2 + 2)
    }
}

